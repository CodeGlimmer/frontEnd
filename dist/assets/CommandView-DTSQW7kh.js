import{_ as re,s as ie,i as g,a as P,k as ce,x as E,A as de,c as I,w as a,r,B as ue,o as u,b as l,d as t,n as T,g as v,y as ve,e as b,p as V,F as U,f as H,t as _,l as L,q as me,T as _e,C as pe,D as fe}from"./index-kmKPHIKf.js";import{u as be}from"./theme-ofzu94UO.js";import{u as ye}from"./order-CakmNsEV.js";import"./OderManagement-Cbu9FEJg.js";import"./useSocket-DSyTKqUj.js";import"./RosLib-C7gnwWt6.js";const he={class:"command-input-section"},ge={key:0,class:"command-history mt-1"},ke={class:"d-flex align-center"},xe={class:"d-flex align-center"},we={class:"table-container"},Ce={key:0,class:"responsive-table"},Te={key:0,class:"empty-state"},Se={key:0,class:"responsive-table"},Ve={class:"col col-1","data-label":"Order Id"},Le={class:"col col-2","data-label":"Product Type"},Ne={class:"col col-3","data-label":"Order Quantity"},ze={class:"col col-4","data-label":"Order Date"},Oe={class:"col col-5","data-label":"Priority"},Pe={class:"d-flex align-center"},Be={__name:"CommandView",setup(De){ue(o=>({"419c187a":s.value?"var(--dark-surface)":"var(--surface)",cfe3f278:s.value?"var(--dark-on-surface)":"var(--on-surface)","60ccc074":s.value?"var(--dark-card-elevation)":"var(--card-elevation)","2782698c":s.value?"var(--dark-surface-container)":"var(--surface-container)",ee526b0c:s.value?"var(--dark-surface-variant)":"var(--surface-variant)","3a94931c":s.value?"var(--dark-surface-variant)":"white","74f1ba61":s.value?"0 2px 6px rgba(0, 0, 0, 0.3)":"0 2px 6px rgba(0, 0, 0, 0.1)","6ea99dbb":s.value?"0 6px 12px rgba(0, 0, 0, 0.4)":"0 6px 12px rgba(0, 0, 0, 0.15)","12eebf70":s.value?"var(--dark-primary)":"var(--primary-color)","582ca045":s.value?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",f66ed5a0:s.value?"var(--dark-secondary)":"var(--secondary-color)"}));const B=be(),N=ye(),{show_list:p}=ie(N),{handle_command:F}=N,f=g(""),k=g(!1),y=g([]),c=g(null),D=g(!1),s=P(()=>B.theme==="dark"),z=P(()=>(s.value,"primary")),x=P(()=>(s.value,"secondary"));ce(()=>{c.value&&c.value.addEventListener("scroll",K),setTimeout(()=>{const o=document.querySelector(".table-header");o&&o.classList.add("animate-in")},100)});function K(){c.value&&(D.value=c.value.scrollTop>300)}function M(){c.value&&c.value.scrollTo({top:0,behavior:"smooth"})}function Q(o){const e=Number(o);if(!isNaN(e)){if(e>=1&&e<=3)return"success";if(e>=4&&e<=7)return"warning";if(e>=8&&e<=10)return"error"}return"grey"}function W(){try{if(p.value.length===0){w("没有可导出的数据","warning","mdi-alert-circle");return}const o=["order_id","product_type","order_quantity","order_date","priority"],e=[o.join(","),...p.value.map(h=>o.map(C=>h[C]).join(","))].join(`
`),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),S=URL.createObjectURL(n);d.setAttribute("href",S),d.setAttribute("download",`orders_export_${new Date().toISOString().slice(0,10)}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),w("数据导出成功","success","mdi-check-circle")}catch(o){w("导出失败："+o.message,"error","mdi-alert")}}function G(){N.reset_list(),w("结果已清空","info","mdi-refresh")}const m=g({show:!1,text:"",color:"success",timeout:3e3,icon:"mdi-check-circle"});function w(o,e,n){m.value={show:!0,text:o,color:e,timeout:3e3,icon:n}}function J(){const o=f.value.trim();if(!o)return[];let e=o.split("|"),n=[];for(let d of e)n.push(d.split(" "));return o&&!y.value.includes(o)&&(y.value.push(o),y.value.length>10&&y.value.shift()),n}function $(){if(!f.value.trim())return;k.value=!0;const o=J();setTimeout(()=>{F(o,w),k.value=!1,f.value="",setTimeout(()=>{c.value&&c.value.scrollTo({top:0,behavior:"smooth"})},100)},300)}E(k,o=>{!o&&p.value.length>0&&setTimeout(()=>{document.querySelectorAll(".table-row").forEach((n,d)=>{setTimeout(()=>{n.classList.add("animate-in")},d*50)})},100)}),E(()=>B.theme,()=>{de(()=>{const o=document.querySelector(".table-header");o&&(o.classList.remove("animate-in"),o.offsetWidth,o.classList.add("animate-in")),c.value&&(c.value.style.display="none",c.value.offsetWidth,c.value.style.display="")})},{immediate:!0});function X(o){const e=Number(o);if(!isNaN(e)){if(e>=1&&e<=3)return`低 (${e})`;if(e>=4&&e<=7)return`中 (${e})`;if(e>=8&&e<=10)return`高 (${e})`}return`${o}`}return(o,e)=>{const n=r("v-icon"),d=r("v-card-title"),S=r("v-card-item"),h=r("v-btn"),C=r("v-fade-transition"),Y=r("v-text-field"),Z=r("v-slide-y-transition"),O=r("v-chip"),ee=r("v-chip-group"),te=r("v-expand-transition"),R=r("v-card-text"),q=r("v-card"),A=r("v-list-item-title"),j=r("v-list-item"),ae=r("v-list"),oe=r("v-menu"),le=r("v-snackbar"),se=r("v-container");return u(),I(se,{fluid:"",class:"command-line-system pa-0 ma-0",style:{"max-width":"100%"}},{default:a(()=>[l("div",he,[t(q,{class:T(["command-card mb-2",{"dark-card":s.value}]),elevation:2,border:!0},{default:a(()=>[t(S,null,{prepend:a(()=>[t(n,{icon:"mdi-console-line",size:"large",color:z.value},null,8,["color"])]),default:a(()=>[t(d,{class:"text-h5 font-weight-medium"},{default:a(()=>e[3]||(e[3]=[v("命令行系统")])),_:1})]),_:1}),t(R,{class:"pt-0"},{default:a(()=>[t(Z,null,{default:a(()=>[t(Y,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=i=>f.value=i),label:"输入命令（例如：find a => a.order_id < 100）",onKeyup:ve($,["enter"]),clearable:"",variant:"outlined",placeholder:"输入命令后按回车执行","bg-color":s.value?"grey-darken-3":"grey-lighten-4",density:"comfortable","hide-details":"auto",loading:k.value,class:"command-input"},{"prepend-inner":a(()=>[t(n,{icon:"mdi-code-greater-than",color:x.value},null,8,["color"])]),append:a(()=>[t(C,null,{default:a(()=>[t(h,{variant:"tonal",color:"primary",onClick:$,density:"comfortable",loading:k.value,disabled:!f.value.trim(),class:"ml-2 execute-btn"},{append:a(()=>[t(n,{end:"",icon:"mdi-send",size:"small"})]),default:a(()=>[e[4]||(e[4]=v(" 执行 "))]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["modelValue","bg-color","loading"])]),_:1}),t(te,null,{default:a(()=>[y.value.length>0?(u(),b("div",ge,[l("div",ke,[t(n,{icon:"mdi-history",size:"small",class:"mr-2",color:x.value},null,8,["color"]),e[5]||(e[5]=l("span",{class:"text-caption font-weight-medium"},"历史命令",-1))]),t(ee,null,{default:a(()=>[(u(!0),b(U,null,H(y.value.slice(-5),(i,ne)=>(u(),I(O,{key:ne,size:"small",variant:"tonal",color:x.value,onClick:$e=>f.value=i,class:"history-chip"},{default:a(()=>[v(_(i),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})])):V("",!0)]),_:1})]),_:1})]),_:1},8,["class"])]),t(q,{class:T(["results-card",{"dark-card":s.value}]),elevation:2,border:!0},{default:a(()=>[t(S,null,{prepend:a(()=>[t(n,{icon:"mdi-table",color:z.value},null,8,["color"])]),append:a(()=>[l("div",xe,[t(O,{color:z.value,variant:"tonal",size:"small",class:"mr-2"},{default:a(()=>[v(_(L(p).length)+" 条记录 ",1)]),_:1},8,["color"]),t(oe,null,{activator:a(({props:i})=>[t(h,me({icon:"mdi-dots-vertical",variant:"text",density:"comfortable"},i,{color:x.value}),null,16,["color"])]),default:a(()=>[t(ae,{density:"compact"},{default:a(()=>[t(j,{onClick:W},{prepend:a(()=>[t(n,{icon:"mdi-download"})]),default:a(()=>[t(A,null,{default:a(()=>e[7]||(e[7]=[v("导出结果")])),_:1})]),_:1}),t(j,{onClick:G},{prepend:a(()=>[t(n,{icon:"mdi-refresh"})]),default:a(()=>[t(A,null,{default:a(()=>e[8]||(e[8]=[v("清空结果")])),_:1})]),_:1})]),_:1})]),_:1})])]),default:a(()=>[t(d,null,{default:a(()=>e[6]||(e[6]=[v("结果")])),_:1})]),_:1}),t(R,{class:"pa-0"},{default:a(()=>[l("div",we,[l("div",{class:T(["header-fixed",{"header-fixed-dark":s.value}])},[o.$vuetify.display.smAndDown?V("",!0):(u(),b("ul",Ce,[l("li",{class:T(["table-header",{"table-header-dark":s.value}])},e[9]||(e[9]=[l("div",{class:"col col-1"},"Order Id",-1),l("div",{class:"col col-2"},"Product Type",-1),l("div",{class:"col col-3"},"Order Quantity",-1),l("div",{class:"col col-4"},"Order Date",-1),l("div",{class:"col col-5"},"Priority",-1)]),2)]))],2),l("div",{class:"scroll-body",ref_key:"scrollBody",ref:c},[t(C,null,{default:a(()=>[L(p).length===0?(u(),b("div",Te,[t(n,{icon:"mdi-database-search",size:"64",color:x.value,class:"mb-3"},null,8,["color"]),e[10]||(e[10]=l("div",{class:"text-subtitle-1"},"暂无数据",-1)),e[11]||(e[11]=l("div",{class:"text-caption"},"输入命令查询数据",-1))])):V("",!0)]),_:1}),L(p).length>0?(u(),b("ul",Se,[t(_e,{name:"list"},{default:a(()=>[(u(!0),b(U,null,H(L(p),i=>(u(),b("li",{class:T(["table-row",{"table-row-dark":s.value}]),key:i.order_id},[l("div",Ve,_(i.order_id),1),l("div",Le,_(i.product_type),1),l("div",Ne,_(i.order_quantity),1),l("div",ze,_(i.order_date),1),l("div",Oe,[t(O,{color:Q(i.priority),size:"small",class:"priority-chip",variant:"tonal"},{default:a(()=>[v(_(X(i.priority)),1)]),_:2},1032,["color"])])],2))),128))]),_:1})])):V("",!0)],512)])]),_:1})]),_:1},8,["class"]),t(C,null,{default:a(()=>[pe(t(h,{fab:"",fixed:"",right:"",bottom:"",color:"primary",variant:"tonal",size:"small",class:"scroll-top-btn",onClick:M,icon:"mdi-arrow-up"},null,512),[[fe,D.value]])]),_:1}),t(le,{modelValue:m.value.show,"onUpdate:modelValue":e[2]||(e[2]=i=>m.value.show=i),color:m.value.color,timeout:m.value.timeout,location:"top",rounded:!0,class:"custom-snackbar"},{actions:a(()=>[t(h,{variant:"text",onClick:e[1]||(e[1]=i=>m.value.show=!1),icon:"mdi-close"})]),default:a(()=>[l("div",Pe,[t(n,{icon:m.value.icon,class:"mr-2"},null,8,["icon"]),v(" "+_(m.value.text),1)])]),_:1},8,["modelValue","color","timeout"])]),_:1})}}},Ue=re(Be,[["__scopeId","data-v-02d6a398"]]);export{Ue as default};
