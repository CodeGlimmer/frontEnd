import{I as defineStore,i as ref}from"./index-BOH9GfG6.js";import{O as OrderManagement}from"./OderManagement-Dzc_ZI8N.js";import"./useSocket-CGAbKkod.js";import"./RosLib-C7gnwWt6.js";const useOrder=defineStore("order",()=>{const order_list=ref([]),show_list=ref([]),update_data=async()=>{order_list.value=await OrderManagement.get_all_orders(),show_list.value=[...order_list.value]},default_sort=async()=>{show_list.value=await OrderManagement.default_order()},handle_command=async(command_list,showSnackbar)=>{let f;if(command_list.length===1&&command_list[0].length===1&&command_list[0][0]===""){showSnackbar("重置成功","success","mdi-check-circle");return}else if(command_list.length===1&&command_list[0].length===1&&command_list[0][0]==="sort"){await default_sort(),showSnackbar("success","success","mdi-check-circle");return}else command_list.forEach(command=>{switch(command[0]){case"sort":switch(command.length){case 1:showSnackbar("sort不带参数使用时,只能是第一个命令","error","mdi-alert-circle");break;case 2:if(f=eval(command[1]),typeof f=="function"){show_list.value=show_list.value.sort(f),showSnackbar("success","success","mdi-check-circle");break}else showSnackbar("函数不合法","error","mdi-alert-circle");break;default:showSnackbar("非法参数","error","mdi-alert-circle");break}break;case"find":switch(command.length){case 2:f=eval(command[1]),typeof f=="function"?show_list.value=show_list.value.filter(eval(command[1])):showSnackbar("函数不合法","error","mdi-alert-circle");break;default:showSnackbar("find命令必须带一个js函数作为参数","error","mdi-alert-cicle");break}break;default:showSnackbar("非法命令","error","mdi-alert-circle");break}})},handleSearch=a=>{let r=[];show_list.value.forEach(e=>{(String(e.order_id).includes(a)||e.product_type.includes(a)||String(e.order_quantity).includes(a)||e.order_date.includes(a)||String(e.priority).includes(a))&&r.push(e)}),show_list.value=r};return update_data(),{show_list,update_data,default_sort,handle_command,handleSearch}});export{useOrder as u};
