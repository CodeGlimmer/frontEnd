import{u as E}from"./theme-HQ1WYIhm.js";import{_ as L,c as R,w as a,s as z,a as q,r as i,o as w,b as l,d as n,n as m,e as A,F,f as I,g as u,t as g,h as B}from"./index-BOH9GfG6.js";import"./useSocket-CGAbKkod.js";import{u as N}from"./UserManagement-wuqYXp2G.js";import"./RosLib-C7gnwWt6.js";const j={name:"RegisterComponent",setup(){const r=E(),{theme:e}=z(r),{changeTheme:d}=r;return{isDarkTheme:q(()=>e.value==="dark"),toggleTheme:()=>{d(),document.body.classList.toggle("dark-mode")}}},data(){return{username:"",password:"",confirmPassword:"",agreeTerms:!1,showPassword:!1,showConfirmPassword:!1,loading:!1,errors:{username:"",password:"",confirmPassword:"",agreeTerms:""},rules:{required:r=>!!r||"This field is required",username:r=>r?r.length<3?"Username must be at least 3 characters":r.length>20?"Username must be less than 20 characters":/^[a-zA-Z0-9_]+$/.test(r)?!0:"Username can only contain letters, numbers and underscore":!0,password:r=>r?r.length<6?"Password must be at least 6 characters":r.length>30?"Password must be less than 30 characters":/\d/.test(r)?/[a-zA-Z]/.test(r)?!0:"Password must contain at least one letter":"Password must contain at least one number":!0,confirmPassword:r=>r?r===this.password||"Passwords do not match":!0,agreeTerms:r=>r||"You must agree to the terms and conditions to continue"},snackbar:{show:!1,text:"",color:"success"}}},mounted(){this.isDarkTheme&&document.body.classList.add("dark-mode"),document.addEventListener("keydown",this.handleKeyDown),this.rules.confirmPassword=r=>r?r===this.password||"Passwords do not match":!0},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{async handleSignup(){if(this.$refs.form.validate()){this.loading=!0;try{const r={username:this.username,password:this.password};await N.register(r),this.showSnackbar("Registration successful! Redirecting to login...","success"),setTimeout(()=>{this.$router.push("/")},2e3)}catch(r){if(console.error("Registration error:",r),r.response){const e=r.response.status,d=r.response.data;e===409?(d.field==="username"&&(this.errors.username="Username already exists"),this.showSnackbar(d.message||"Registration failed, please try with different details","error")):this.showSnackbar(d.message||"Registration failed, please try again","error")}else r.request?this.showSnackbar("Network error, please check your connection","error"):this.showSnackbar("Registration failed, please try again","error")}finally{this.loading=!1}}},clearError(r){this.errors[r]=""},goToLogin(){this.$router.push("/")},showSnackbar(r,e){this.snackbar.text=r,this.snackbar.color=e,this.snackbar.show=!0},handleKeyDown(r){r.key==="Enter"&&!this.loading&&this.handleSignup()}}},K={class:"floating-circles"},M={class:"theme-toggle-wrapper"};function Z(r,e,d,o,s,c){const p=i("v-icon"),k=i("v-tooltip"),f=i("v-btn"),b=i("v-avatar"),v=i("v-row"),y=i("v-card-item"),h=i("v-text-field"),_=i("v-checkbox"),T=i("v-progress-circular"),x=i("v-form"),P=i("v-card-text"),D=i("v-divider"),C=i("v-card-actions"),V=i("v-snackbar"),S=i("v-card"),U=i("v-container");return w(),R(U,{fluid:"",class:"register-container d-flex align-center justify-center"},{default:a(()=>[l("div",{class:m(["animated-background",{"dark-theme":o.isDarkTheme}])},[l("div",K,[(w(),A(F,null,I(20,t=>l("div",{class:"circle",key:t})),64))])],2),e[18]||(e[18]=l("div",{class:"blur-overlay"},null,-1)),n(S,{class:m(["register-card mx-auto",{"dark-card":o.isDarkTheme}]),elevation:"3",icon:"mdi-weather-sunny","max-width":"450",rounded:"lg",loading:s.loading,disabled:s.loading},{default:a(()=>[e[17]||(e[17]=l("div",{class:"card-shine-effect"},null,-1)),l("div",M,[n(f,{icon:o.isDarkTheme?"mdi-weather-night":"mdi-weather-sunny",density:"comfortable",variant:"text",onClick:o.toggleTheme,class:"theme-toggle-btn",color:o.isDarkTheme?"amber":"indigo-darken-3"},{default:a(()=>[n(p,{color:o.isDarkTheme?"amber":"indigo-darken-3"},{default:a(()=>[u(g(o.isDarkTheme?"mdi-weather-night":"mdi-weather-sunny"),1)]),_:1},8,["color"]),n(k,{activator:"parent",location:"bottom"},{default:a(()=>[u(" Toggle "+g(o.isDarkTheme?"Light":"Dark")+" Mode ",1)]),_:1})]),_:1},8,["icon","onClick","color"])]),n(y,null,{default:a(()=>[n(v,{justify:"center",class:"mt-4 mb-2"},{default:a(()=>[n(b,{size:"80",class:m(["elevation-4 animate-bounce",o.isDarkTheme?"dark-gradient":"primary-gradient"])},{default:a(()=>[n(p,{size:"x-large",color:"white"},{default:a(()=>e[12]||(e[12]=[u("mdi-account-plus")])),_:1})]),_:1},8,["class"])]),_:1}),l("h1",{class:m(["text-h4 text-center mt-4 font-weight-bold animate-title",o.isDarkTheme?"text-amber":"text-primary"])}," Create Account ",2),e[13]||(e[13]=l("p",{class:"text-subtitle-1 text-center text-medium-emphasis"},"Join us today",-1))]),_:1}),n(P,null,{default:a(()=>[n(x,{onSubmit:B(c.handleSignup,["prevent"]),ref:"form"},{default:a(()=>[n(h,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.username=t),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",color:o.isDarkTheme?"amber":"primary",class:m(["mb-3 animate-slide-fade custom-field",{"dark-field":o.isDarkTheme}]),rules:[s.rules.required,s.rules.username],"error-messages":s.errors.username,onFocus:e[1]||(e[1]=t=>c.clearError("username"))},null,8,["modelValue","color","rules","error-messages","class"]),n(h,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.password=t),label:"Password","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":s.showPassword?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[3]||(e[3]=t=>s.showPassword=!s.showPassword),type:s.showPassword?"text":"password",variant:"outlined",color:o.isDarkTheme?"amber":"primary",class:m(["mb-3 animate-slide-fade custom-field",{"dark-field":o.isDarkTheme}]),rules:[s.rules.required,s.rules.password],"error-messages":s.errors.password,onFocus:e[4]||(e[4]=t=>c.clearError("password"))},null,8,["modelValue","append-inner-icon","type","color","rules","error-messages","class"]),n(h,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=t=>s.confirmPassword=t),label:"Confirm Password","prepend-inner-icon":"mdi-lock-check-outline","append-inner-icon":s.showConfirmPassword?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[6]||(e[6]=t=>s.showConfirmPassword=!s.showConfirmPassword),type:s.showConfirmPassword?"text":"password",variant:"outlined",color:o.isDarkTheme?"amber":"primary",class:m(["mb-3 animate-slide-fade custom-field",{"dark-field":o.isDarkTheme}]),rules:[s.rules.required,s.rules.confirmPassword],"error-messages":s.errors.confirmPassword,onFocus:e[7]||(e[7]=t=>c.clearError("confirmPassword"))},null,8,["modelValue","append-inner-icon","type","color","rules","error-messages","class"]),n(_,{modelValue:s.agreeTerms,"onUpdate:modelValue":e[8]||(e[8]=t=>s.agreeTerms=t),label:"I agree to the ToS & PP",color:o.isDarkTheme?"amber":"primary","hide-details":"",class:"mb-4 animate-fade",rules:[s.rules.agreeTerms],"error-messages":s.errors.agreeTerms,onChange:e[9]||(e[9]=t=>c.clearError("agreeTerms"))},null,8,["modelValue","color","rules","error-messages"]),n(f,{color:o.isDarkTheme?"amber":"primary",block:"",size:"large",type:"submit",class:m(["mt-2 register-submit-btn",o.isDarkTheme?"dark-gradient":"primary-gradient"]),elevation:"2",loading:s.loading,rounded:"lg"},{loader:a(()=>[n(T,{indeterminate:"",color:"white"})]),default:a(()=>[e[14]||(e[14]=l("span",{class:"btn-content"},"Create Account",-1))]),_:1},8,["color","class","loading"])]),_:1},8,["onSubmit"])]),_:1}),n(D,{class:"mt-3"}),n(C,{class:"d-flex justify-center pa-4"},{default:a(()=>[e[16]||(e[16]=l("p",{class:"text-body-2 text-medium-emphasis me-2"},"Already have an account?",-1)),n(f,{variant:"text",color:o.isDarkTheme?"amber":"primary",class:"login-link-btn",onClick:c.goToLogin},{default:a(()=>e[15]||(e[15]=[u(" Sign In ")])),_:1},8,["color","onClick"])]),_:1}),n(V,{modelValue:s.snackbar.show,"onUpdate:modelValue":e[11]||(e[11]=t=>s.snackbar.show=t),color:s.snackbar.color,timeout:"3000",location:"top",rounded:"pill",elevation:"4"},{actions:a(()=>[n(f,{color:"white",icon:"mdi-close",onClick:e[10]||(e[10]=t=>s.snackbar.show=!1),variant:"text",size:"small"})]),default:a(()=>[u(g(s.snackbar.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["loading","disabled","class"])]),_:1})}const Q=L(j,[["render",Z],["__scopeId","data-v-3c53c44a"]]);export{Q as default};
