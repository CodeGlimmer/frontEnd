import{_ as Pe,e as ce,d as e,w as t,b as a,r as l,g as u,o as T,a as G,i as C,x as be,y as ye,k as Be,z as ot,c as oe,q as Ee,n as Y,t as F,u as ft,s as pt,O as et,P as nt,E as Ye,p as _e,F as st,f as rt,h as ht,A as tt,D as gt,B as _t,l as at,Q as bt}from"./index-BOH9GfG6.js";import{u as it}from"./theme-HQ1WYIhm.js";import{a as De,b as Me}from"./useSocket-CGAbKkod.js";import"./RosLib-C7gnwWt6.js";import{u as He,i as qe,a as Je,b as Xe,c as Ze,d as Ke,e as ct,f as ut,g as Qe,h as yt,j as dt,k as vt,l as mt,m as xt,n as wt,L as Oe,o as Ct}from"./index-DkaH_rt3.js";const Ce={urls:{changeModel:"a0/",naivePredict:"a1/",expPredict:"a2/",dickey_fuller_test:"a3/",acfPacf:"a4/",resAcfPacf:"a5/",arimaPredict:"a6/",neutralNetworkPred:"a7/",getAllData:"a8/"},async changeModel(S){await De.post(Me+this.urls.changeModel,S)},async naivePredict(){try{const{data:S}=await De.get(Me+this.urls.naivePredict);return S}catch(S){console.log(S);return}},async expPredict(){try{const{data:S}=await De.get(Me+this.urls.expPredict);return S}catch{return}},async dickeyFullerTest(){try{const{data:S}=await De.get(Me+this.urls.dickey_fuller_test);return S}catch{return}},async getAcfPacf(){try{const{data:S}=await De.get(Me+this.urls.acfPacf);return S}catch{return}},async getResAcfPacf(){try{const{data:S}=await De.get(Me+this.urls.resAcfPacf);return S}catch{return}},async arimaPredict(){try{const{data:S}=await De.get(Me+this.urls.arimaPredict);return S}catch(S){console.log(S);return}},async neutralNetworkPredict(){try{const{data:S}=await De.get(Me+this.urls.neutralNetworkPred);return S}catch(S){console.log(S);return}},async getAllData(){try{const{data:S}=await De.get(Me+this.urls.getAllData);return S}catch{return}}},St={name:"TimeSeriesToolbar",props:{initialStore:{type:Number,default:1},initialItem:{type:Number,default:1},loading:{type:Boolean,default:!1}},data(){return{localStore:this.initialStore,localItem:this.initialItem}},methods:{emitRefresh(){const S=parseInt(this.localStore,10),y=parseInt(this.localItem,10);!isNaN(S)&&!isNaN(y)&&(console.log("刷新了"),this.$emit("refresh-data",{store:S,item:y}))}}},kt={class:"time-series-toolbar"},At={class:"d-flex align-center flex-wrap tw:gap-6"};function zt(S,y,o,w,M,i){const p=l("v-text-field"),R=l("v-spacer"),B=l("v-progress-circular"),A=l("v-btn"),m=l("v-card");return T(),ce("div",kt,[e(m,{class:"toolbar-card pa-3",elevation:"1",rounded:"lg"},{default:t(()=>[a("div",At,[y[3]||(y[3]=a("div",{class:"text-subtitle-3 font-weight-medium mr-2"},"预测模型参数",-1)),e(p,{modelValue:M.localStore,"onUpdate:modelValue":y[0]||(y[0]=x=>M.localStore=x),label:"Store",type:"number",variant:"outlined",density:"compact","hide-details":"",class:"toolbar-field","bg-color":"surface",rules:[x=>!!x||"请输入Store值",x=>Number.isInteger(Number(x))||"Store必须是整数"]},null,8,["modelValue","rules"]),e(p,{modelValue:M.localItem,"onUpdate:modelValue":y[1]||(y[1]=x=>M.localItem=x),label:"Item",type:"number",variant:"outlined",density:"compact","hide-details":"",class:"toolbar-field","bg-color":"surface",rules:[x=>!!x||"请输入Item值",x=>Number.isInteger(Number(x))||"Item必须是整数"]},null,8,["modelValue","rules"]),e(R),e(A,{color:"primary",onClick:i.emitRefresh,size:"large",density:"comfortable",variant:"elevated","prepend-icon":"mdi-refresh",class:"refresh-btn ml-2",loading:o.loading,disabled:o.loading},{loader:t(()=>[e(B,{indeterminate:"",size:"24"})]),default:t(()=>[y[2]||(y[2]=u(" 刷新 "))]),_:1},8,["onClick","loading","disabled"])])]),_:1})])}const Ft=Pe(St,[["render",zt],["__scopeId","data-v-669e25db"]]),$t={class:"tw:flex tw:justify-center"},Lt={class:"range-display mt-4 px-2 d-flex align-center flex-wrap"},Dt={class:"range-slider-container mt-6 px-2"},Mt={class:"range-label-container d-flex justify-space-between mb-2"},It={class:"text-body-2 text-primary font-weight-medium"},Et={class:"text-body-2 text-secondary font-weight-medium"},Tt={__name:"BaseChart",props:{labels:{type:Array,required:!0,validator:S=>S.every(y=>typeof y=="string")},values:{type:Array,required:!0,validator:S=>S.every(y=>typeof y=="number")},initialLeftIndex:{type:Number,default:null},initialRightIndex:{type:Number,default:null}},emits:["range-confirmed"],setup(S,{emit:y}){He([Je,Xe,Ze,Ke,ct,ut,Qe]);const o=S,w=y,M=it(),i=G(()=>M.theme),p=G(()=>i.value==="dark"),R=C(null),B=C(null),A=C(null),m=C(0),x=C(0),c=C(0),P=C(0),O=C([0,0]),K=G(()=>m.value!==c.value||x.value!==P.value),E=C(!1),te=f=>f?f.length>8?f.substring(0,8)+"...":f:"",z=()=>{if(o.labels.length<=5)return{0:"",[o.labels.length-1]:""};const f={},L=Math.ceil(o.labels.length/5);for(let _=0;_<o.labels.length;_+=L)(_===0||_===o.labels.length-1||_%L===0)&&(f[_]="");return f[o.labels.length-1]="",f},ne=()=>{const f=o.labels.length;f<=1?(m.value=0,x.value=(f>0,0)):o.initialLeftIndex!==null&&o.initialRightIndex!==null?(m.value=Math.max(0,Math.min(o.initialLeftIndex,f-2)),x.value=Math.max(m.value+1,Math.min(o.initialRightIndex,f-1))):(m.value=Math.max(0,Math.floor(f*.25)),x.value=Math.min(f-1,Math.floor(f*.75))),O.value=[m.value,x.value],c.value=m.value,P.value=x.value},ae=()=>{E.value=window.innerWidth<768},se=()=>{if(B.value){ae(),A.value&&(A.value.dispose(),A.value=null),g();try{if(A.value=qe(B.value,null,{renderer:"canvas",useDirtyRect:!0}),q(),window.ResizeObserver){const f=new ResizeObserver(b(()=>{R.value&&A.value&&q()},100));R.value&&f.observe(R.value)}}catch(f){console.error("Chart initialization error:",f)}}},b=(f,L)=>{let _=null;return function(){const k=this,d=arguments;clearTimeout(_),_=setTimeout(()=>{f.apply(k,d)},L)}},g=()=>{if(!R.value)return;ae();const f=R.value.clientWidth,L=E.value?Math.min(f*.8,280):Math.min(f*.6,320);R.value.style.height=L+"px",B.value&&(B.value.style.width="100%",B.value.style.height="100%")};let $;const re=()=>{$&&clearTimeout($),$=setTimeout(()=>{g(),A.value&&(A.value.resize(),q())},100)},ue=()=>{c.value=m.value,P.value=x.value,w("range-confirmed",{leftIndex:m.value,rightIndex:x.value})},v=f=>{m.value=f[0],x.value=f[1],q()},H=()=>p.value?{backgroundColor:"#1C1B1F",textColor:"#E6E1E5",axisColor:"rgba(255, 255, 255, 0.25)",splitLineColor:"rgba(255, 255, 255, 0.08)",tooltipBackground:"rgba(30, 30, 30, 0.95)",tooltipTextColor:"#E6E1E5",primaryColor:"#D0BCFF",secondaryColor:"#CCC2DC",markAreaColor:"rgba(208, 188, 255, 0.15)",areaColor:[{offset:0,color:"rgba(208, 188, 255, 0.4)"},{offset:.8,color:"rgba(208, 188, 255, 0.1)"},{offset:1,color:"rgba(208, 188, 255, 0.02)"}]}:{backgroundColor:"#FFFBFF",textColor:"#1C1B1F",axisColor:"rgba(0, 0, 0, 0.25)",splitLineColor:"rgba(0, 0, 0, 0.08)",tooltipBackground:"rgba(255, 255, 255, 0.95)",tooltipTextColor:"#1C1B1F",primaryColor:"#6750A4",secondaryColor:"#B93E94",markAreaColor:"rgba(103, 80, 164, 0.15)",areaColor:[{offset:0,color:"rgba(103, 80, 164, 0.4)"},{offset:.8,color:"rgba(103, 80, 164, 0.1)"},{offset:1,color:"rgba(103, 80, 164, 0.02)"}]},q=()=>{if(A.value)try{const f=H(),L=E.value?75:o.labels.length>12?45:0,_=E.value?Math.max(0,Math.ceil(o.labels.length/10)-1):Math.max(0,Math.ceil(o.labels.length/20)-1),k={itemStyle:{color:f.markAreaColor,borderColor:"transparent",borderWidth:0},data:[[{name:"预测区间",xAxis:m.value},{xAxis:x.value}]],silent:!0},d=[{silent:!0,symbol:["circle","none"],symbolSize:[8,0],lineStyle:{color:f.primaryColor,width:2,type:"solid",cap:"round"},emphasis:{lineStyle:{width:3,shadowBlur:6,shadowColor:f.primaryColor}},label:{show:!1},xAxis:m.value},{silent:!0,symbol:["circle","none"],symbolSize:[8,0],lineStyle:{color:f.secondaryColor,width:2,type:"solid",cap:"round"},emphasis:{lineStyle:{width:3,shadowBlur:6,shadowColor:f.secondaryColor}},label:{show:!1},xAxis:x.value}],J={animation:!0,animationDuration:800,animationEasing:"cubicInOut",backgroundColor:"transparent",grid:{left:E.value?"15%":"3%",right:E.value?"5%":"4%",bottom:E.value?"15%":"10%",top:"8%",containLabel:!0},tooltip:{trigger:"axis",confine:!0,formatter:h=>{const r=h[0].dataIndex;return`${o.labels[r]}: ${o.values[r]}`},backgroundColor:f.tooltipBackground,borderColor:"rgba(0, 0, 0, 0.1)",textStyle:{color:f.tooltipTextColor},extraCssText:"box-shadow: 0 2px 12px rgba(0, 0, 0, 0.12); border-radius: 16px; padding: 12px;"},xAxis:[{type:"category",data:o.labels,axisLabel:{rotate:L,interval:_,formatter:h=>{if(E.value){if(h.length>6)return h.substring(0,6)+".."}else if(o.labels.length>30&&h.length>8)return h.substring(0,8)+"...";return h},color:f.textColor},axisLine:{lineStyle:{color:f.axisColor}},axisTick:{alignWithLabel:!0,lineStyle:{color:f.axisColor}}}],yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:f.textColor},splitLine:{lineStyle:{type:"dashed",color:f.splitLineColor}}}],dataZoom:[{type:"inside",start:0,end:100,zoomLock:!0,throttle:100,zoomOnMouseWheel:!1,moveOnMouseWheel:!1,preventDefaultMouseMove:!1}],series:[{data:o.values,type:"line",smooth:!0,symbol:"circle",symbolSize:E.value?10:8,showSymbol:o.values.length<100,emphasis:{scale:!0,focus:"series",itemStyle:{shadowBlur:16,shadowColor:p.value?"rgba(208, 188, 255, 0.4)":"rgba(103, 80, 164, 0.4)"}},itemStyle:{color:f.primaryColor,borderColor:p.value?"#1C1B1F":"#fff",borderWidth:2},lineStyle:{width:E.value?4:3,cap:"round",join:"round",color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:p.value?"#D0BCFF":"#9A82DB"},{offset:1,color:p.value?"#9A82DB":"#6750A4"}]},shadowColor:p.value?"rgba(208, 188, 255, 0.2)":"rgba(103, 80, 164, 0.2)",shadowBlur:10},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:f.areaColor},opacity:.8},markArea:k,markLine:{silent:!0,data:d,animationDuration:300}}]};A.value.setOption(J,!0)}catch(f){console.error("Error updating chart:",f)}};return be(()=>p.value,()=>{ye(()=>{q()})}),be(()=>[o.labels,o.values],()=>{ye(()=>{ne(),A.value?q():se()})},{deep:!0}),Be(()=>{ne(),ye(()=>{setTimeout(()=>{se()},100)})}),ot(()=>{window.removeEventListener("resize",re),clearTimeout($),A.value&&(A.value.dispose(),A.value=null)}),(f,L)=>{const _=l("v-icon"),k=l("v-spacer"),d=l("v-btn"),J=l("v-card"),h=l("v-tooltip"),r=l("v-card-title"),D=l("v-divider"),N=l("v-chip"),W=l("v-chip-group"),U=l("v-range-slider"),me=l("v-card-text");return T(),oe(J,{class:"timeline-selector-card",elevation:"2",rounded:"lg",theme:i.value},{default:t(()=>[e(r,{class:"d-flex align-center py-4 px-6"},{default:t(()=>[e(_,{color:"primary",class:"mr-3",size:"large"},{default:t(()=>L[1]||(L[1]=[u("mdi-chart-timeline-variant")])),_:1}),L[3]||(L[3]=a("span",{class:"text-h6 font-weight-medium"},"时间轴选择器",-1)),e(k),e(h,{location:"bottom"},{activator:t(({props:le})=>[e(d,Ee(le,{variant:"text",icon:"mdi-information-outline",color:"primary",size:"small"}),null,16)]),default:t(()=>[e(J,{class:"pa-2",elevation:"4",rounded:"lg",theme:i.value},{default:t(()=>L[2]||(L[2]=[a("span",null,"拖动滑块选择时间范围，蓝色区域为预测区间",-1)])),_:1},8,["theme"])]),_:1})]),_:1}),e(D),e(me,{class:"px-4 pt-6 pb-4"},{default:t(()=>[a("div",$t,[a("div",{ref_key:"chartContainerRef",ref:R,class:Y(["chart-container",{"dark-mode":p.value}])},[a("div",{ref_key:"chartRef",ref:B,class:"chart tw:flex tw:justify-center"},null,512)],2)]),a("div",Lt,[e(N,{color:"info",variant:"elevated",class:"mr-3 mb-2 font-weight-medium",size:"large"},{default:t(()=>[e(_,{start:""},{default:t(()=>L[4]||(L[4]=[u("mdi-calendar-range")])),_:1}),L[5]||(L[5]=u(" 预测区间 "))]),_:1}),e(W,{class:"range-chips"},{default:t(()=>[e(N,{color:"primary",variant:"elevated",class:"mr-3 mb-2",size:"large"},{default:t(()=>[u(F(S.labels[m.value]||""),1)]),_:1}),L[6]||(L[6]=a("span",{class:"range-separator ma-1 mt-3 me-3"},"至",-1)),e(N,{color:"secondary",variant:"elevated",class:"mb-2",size:"large"},{default:t(()=>[u(F(S.labels[x.value]||""),1)]),_:1})]),_:1}),e(k),e(d,{color:"primary",variant:"tonal",rounded:"pill",class:"confirm-btn mb-2",disabled:!K.value,onClick:ue},{default:t(()=>[e(_,{start:""},{default:t(()=>L[7]||(L[7]=[u("mdi-check")])),_:1}),L[8]||(L[8]=u(" 确认选择 "))]),_:1},8,["disabled"])]),a("div",Dt,[a("div",Mt,[a("span",It,F(S.labels[0]||""),1),a("span",Et,F(S.labels[S.labels.length-1]||""),1)]),e(U,{modelValue:O.value,"onUpdate:modelValue":[L[0]||(L[0]=le=>O.value=le),v],max:S.labels.length-1,min:0,step:1,"thumb-label":"always",color:"primary","track-color":"grey-lighten-3","track-fill-color":"primary-lighten-3",density:"comfortable",disabled:S.labels.length<=1,"thumb-size":28,"show-ticks":"always",ticks:z()},{"thumb-label":t(({modelValue:le,index:I})=>[a("div",{class:Y(["slider-label",I===0?"primary--text":"secondary--text"])},F(le>=0&&S.labels[le]?te(S.labels[le]):""),3)]),_:1},8,["modelValue","max","disabled","ticks"])])]),_:1})]),_:1},8,["theme"])}}},Pt=Pe(Tt,[["__scopeId","data-v-cc131db0"]]),Rt={class:"accuracy-text"},Nt={key:0,class:"chart-loading-overlay"},Bt={key:0,class:"chart-metrics mt-4"},Vt={class:"metric-icon-container"},Ot={class:"metric-content"},qt={class:"metric-value"},Wt={class:"metric-icon-container"},Ut={class:"metric-content"},jt={class:"metric-value"},Gt={class:"metric-icon-container"},Yt={class:"metric-content"},Ht={class:"metric-icon-container"},Jt={class:"metric-content"},Xt={key:0,class:"time-period-selector mt-4"},Zt={key:0,class:"details-panel pa-4"},Kt={class:"details-section"},Qt={class:"details-title"},ea={class:"details-content"},ta={class:"details-section"},aa={class:"details-title"},la={class:"details-content"},oa={class:"details-section"},na={class:"details-title"},sa={class:"trend-content"},ra={class:"trend-indicator"},ia={class:"trend-text"},ca={class:"trend-message"},Ge=1e3,ua={__name:"BasePredictionChart",props:{actualSales:{type:Array,required:!0,default:()=>[]},predictedSales:{type:Array,required:!0,default:()=>[]},dates:{type:Array,required:!0,default:()=>[]},error:{type:Number,default:0},isExpanded:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh","export","time-range-change"],setup(S,{emit:y}){He([Qe,Je,yt,dt,Ze,vt,Xe,Ke,mt,ut,xt,ct,wt]);const o=S,w=y,M=C(null);let i=null,p=null;const R=ft(),B=it(),{theme:A}=pt(B),m=G(()=>R.mobile.value),x=G(()=>R.smAndDown.value&&!R.mobile.value),c=G(()=>A.value==="dark"),P=C(o.isExpanded),O=C(!1),K=C(!1),E=C(0),te=C(2),z=G(()=>!o.loading&&o.actualSales.length>0&&o.dates.length>0),ne=G(()=>m.value?P.value?"380px":"280px":x.value?P.value?"420px":"340px":P.value?"450px":"380px"),ae=G(()=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:`0 ${te.value}px ${te.value*2}px rgba(0, 0, 0, ${c.value?.3:.1})`})),se=G(()=>{const s=Math.abs(o.error);return s<5?"高精度":s<10?"中等精度":s<15?"一般精度":"低精度"}),b=G(()=>{const s=Math.abs(o.error);return s<5?"预测误差低于5%，属于高精度预测":s<10?"预测误差在5-10%之间，属于中等精度预测":s<15?"预测误差在10-15%之间，属于一般精度预测":"预测误差高于15%，属于低精度预测"}),g=G(()=>{const s=Math.abs(o.error);return s<5?"success":s<10?"info":s<15?"warning":"error"}),$=G(()=>c.value?"#64B5F6":"#1976D2"),re=G(()=>_.growthRate>0?"positive-value":_.growthRate<0?"negative-value":""),ue=G(()=>{const s=Math.abs(o.error);return s<5?"positive-value":s<10?"neutral-value":"negative-value"}),v=G(()=>_.trend>.05?"trend-up":_.trend<-.05?"trend-down":"trend-stable"),H=G(()=>_.trend>.05?"mdi-trending-up":_.trend<-.05?"mdi-trending-down":"mdi-trending-neutral"),q=G(()=>_.trend>.1?"强劲上升趋势":_.trend>.05?"温和上升趋势":_.trend>-.05&&_.trend<.05?"稳定趋势":_.trend>-.1?"温和下降趋势":"明显下降趋势"),f=et({average:G(()=>c.value?"#64B5F6":"#1976D2"),peak:G(()=>c.value?"#81C784":"#43A047"),growth:G(()=>_.growthRate>0?c.value?"#81C784":"#43A047":_.growthRate<0?c.value?"#E57373":"#E53935":c.value?"#FFB74D":"#FB8C00"),error:G(()=>{const s=Math.abs(o.error);return s<5?c.value?"#81C784":"#43A047":s<10?c.value?"#FFB74D":"#FB8C00":c.value?"#E57373":"#E53935"})}),L=[{label:"全部",value:"all"},{label:"近30天",value:"30d"},{label:"近90天",value:"90d"},{label:"近半年",value:"180d"},{label:"近一年",value:"365d"}],_=et({averageSales:0,peakSales:0,growthRate:0,mae:0,rmse:0,r2:0,trend:0}),k=G(()=>{if(!z.value)return{dates:[],actual:[],predicted:[]};const s=L[E.value].value;if(s==="all")return{dates:o.dates,actual:o.actualSales,predicted:o.predictedSales};const n=parseInt(s);if(isNaN(n)||o.dates.length<=n)return{dates:o.dates,actual:o.actualSales,predicted:o.predictedSales};const ve=o.dates.length-n;return{dates:o.dates.slice(ve),actual:o.actualSales.slice(ve),predicted:o.predictedSales.slice(ve)}}),d=()=>{if(!z.value)return;const{actual:s,predicted:n}=k.value,ve=s.reduce((Q,V)=>Q+V,0);_.averageSales=ve/s.length,_.peakSales=Math.max(...s);const ie=s.slice(0,Math.min(7,s.length)).reduce((Q,V)=>Q+V,0)/Math.min(7,s.length),xe=s.slice(-Math.min(7,s.length)).reduce((Q,V)=>Q+V,0)/Math.min(7,s.length);_.growthRate=xe/ie-1;let j=0,Z=0,Ie=0;for(let Q=0;Q<s.length&&Q<n.length;Q++)if(n[Q]!==null&&!isNaN(n[Q])){const V=n[Q]-s[Q];j+=V*V,Z+=Math.abs(V),Ie+=Math.pow(s[Q]-_.averageSales,2)}if(_.mae=Z/s.length,_.rmse=Math.sqrt(j/s.length),_.r2=Ie===0?0:1-j/Ie,s.length>=3){let Q=0,V=0,we=0,fe=0;const $e=s.length;for(let he=0;he<$e;he++)Q+=he,V+=s[he],we+=he*s[he],fe+=he*he;const Re=($e*we-Q*V)/($e*fe-Q*Q);_.trend=Re*$e/(_.averageSales||1)}else _.trend=0},J=()=>_.trend>.1?"销售呈现强劲增长趋势，建议增加备货量，扩大生产规模，并考虑开展更多促销活动以维持增长动力。":_.trend>.05?"销售呈现稳健上涨趋势，可以适当增加库存，重点关注热销产品线，优化供应链以满足增长需求。":_.trend>=-.05&&_.trend<=.05?"销售趋势相对稳定，建议维持当前库存和生产水平，重点优化运营效率，提高单品盈利能力。":_.trend>=-.1?"销售呈现轻微下滑趋势，建议谨慎控制库存，关注客户反馈，考虑推出新的促销策略以刺激销售。":"销售呈现明显下降趋势，建议减少库存，评估产品竞争力，分析市场变化，并制定新的营销策略以扭转下滑趋势。",h=s=>s==null||isNaN(s)?"0":s>=1e4?(s/1e4).toFixed(2)+"万":s.toLocaleString("zh-CN",{maximumFractionDigits:2}),r=s=>s==null||isNaN(s)?"0%":(s*100).toFixed(2)+"%",D=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("zh-CN")}catch(n){return console.log(n),s}},N=()=>{if(M.value){if(O.value=!0,i){try{i.dispose()}catch(s){console.log("销毁实例出错:",s)}i=null}ye(()=>{try{if(!M.value)return;i=qe(M.value,null,{renderer:"canvas"});const{dates:s,actual:n,predicted:ve}=k.value,ie=c.value?"rgba(255, 255, 255, 0.85)":"rgba(0, 0, 0, 0.85)",xe=c.value?"rgba(255, 255, 255, 0.65)":"rgba(0, 0, 0, 0.65)",j=c.value?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.15)",Z=c.value?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",Ie=c.value?"rgba(50, 50, 50, 0.9)":"rgba(255, 255, 255, 0.9)",Q=c.value?"rgba(70, 70, 70, 0.9)":"rgba(200, 200, 200, 0.9)",V=c.value?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.9)",we=c.value?"#5CDF6C":"#4CAF50",fe=c.value?"#FFA726":"#FF9800",$e=new Oe(0,0,0,1,[{offset:0,color:c.value?"rgba(92, 223, 108, 0.6)":"rgba(76, 175, 80, 0.5)"},{offset:.8,color:c.value?"rgba(92, 223, 108, 0.1)":"rgba(76, 175, 80, 0.05)"},{offset:1,color:c.value?"rgba(92, 223, 108, 0)":"rgba(76, 175, 80, 0)"}]),Re=new Oe(0,0,0,1,[{offset:0,color:c.value?"rgba(255, 167, 38, 0.6)":"rgba(255, 152, 0, 0.5)"},{offset:.8,color:c.value?"rgba(255, 167, 38, 0.1)":"rgba(255, 152, 0, 0.05)"},{offset:1,color:c.value?"rgba(255, 167, 38, 0)":"rgba(255, 152, 0, 0)"}]),he=n[0]||0,We=he*(1+_.trend),Ue={backgroundColor:"transparent",title:{text:"销售数据分析与预测",left:"center",top:10,textStyle:{fontSize:m.value?14:16,color:ie,fontWeight:500},subtextStyle:{fontSize:m.value?10:12,color:xe}},tooltip:{trigger:"axis",backgroundColor:Ie,borderColor:Q,borderWidth:1,textStyle:{color:V,fontSize:12},padding:[8,12],formatter:function(X){let Ne=X[0].axisValue,ke=X.find(Ae=>Ae.seriesName==="真实销售")?.value||"无数据",Le=X.find(Ae=>Ae.seriesName==="预测销售")?.value||"无数据",pe="无数据",ge="无数据";if(typeof ke=="number"&&typeof Le=="number"&&!isNaN(ke)&&!isNaN(Le)&&ke!==0){const Ae=Le-ke;pe=Ae.toFixed(2),ge=(Ae/ke*100).toFixed(2)+"%"}let Te=`<div style="font-weight:bold;margin-bottom:5px;">${Ne}</div>`;if(Te+=`<div style="display:flex;justify-content:space-between;margin:3px 0;">
                      <span style="color:${we};">真实销售:</span>
                      <span style="color:${ie};font-weight:bold;">${typeof ke=="number"?ke.toFixed(2):ke}</span>
                    </div>`,Te+=`<div style="display:flex;justify-content:space-between;margin:3px 0;">
                      <span style="color:${fe};">预测销售:</span>
                      <span style="color:${ie};font-weight:bold;">${typeof Le=="number"?Le.toFixed(2):Le}</span>
                    </div>`,pe!=="无数据"){const Ae=parseFloat(pe)>=0?"#4CAF50":"#F44336";Te+=`<div style="margin-top:5px;border-top:1px dashed ${c.value?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"};padding-top:5px;">
                        <div style="display:flex;justify-content:space-between;margin:3px 0;">
                          <span>绝对误差:</span>
                          <span style="color:${Ae};font-weight:bold;">${pe}</span>
                        </div>
                        <div style="display:flex;justify-content:space-between;margin:3px 0;">
                          <span>相对误差:</span>
                          <span style="color:${Ae};font-weight:bold;">${ge}</span>
                        </div>
                      </div>`}return Te},axisPointer:{type:"cross",lineStyle:{type:"dashed",width:1,color:c.value?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)"},crossStyle:{width:1,color:c.value?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.4)"},label:{backgroundColor:c.value?"#555":"#6a7985"},shadowStyle:{color:"rgba(150,150,150,0.1)"}},position:function(X,Ne,ke,Le,pe){const ge={top:10};return X[0]<pe.viewSize[0]/2?ge.left=X[0]+10:ge.right=pe.viewSize[0]-X[0]+10,ge}},legend:{data:["真实销售","预测销售"],top:m.value?40:35,itemWidth:m.value?10:12,itemHeight:m.value?10:12,icon:"roundRect",textStyle:{fontSize:m.value?10:12,color:ie},selectedMode:!0,animation:!0,itemGap:m.value?10:20},grid:{left:m.value?"3%":"4%",right:m.value?"3%":"4%",bottom:"16%",top:m.value?"22%":"20%",containLabel:!0},dataZoom:[{type:"inside",start:0,end:100,zoomLock:!1,throttle:100,rangeMode:["value","value"]},{type:"slider",show:!0,height:20,bottom:0,start:0,end:100,textStyle:{color:ie},borderColor:j,backgroundColor:c.value?"rgba(47, 69, 84, 0.3)":"rgba(247, 247, 247, 0.7)",fillerColor:c.value?"rgba(167, 183, 204, 0.2)":"rgba(167, 183, 204, 0.4)",handleIcon:"path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2},emphasis:{handleStyle:{color:"#FFA500"}}}],xAxis:{type:"category",boundaryGap:!1,data:s,axisLabel:{fontSize:m.value?10:11,color:ie,rotate:m.value?45:0,margin:m.value?9:12,formatter:function(X){return s.length>30?X.slice(-5):X},rich:{bold:{fontWeight:"bold",color:ie}}},axisLine:{lineStyle:{color:j,width:1}},axisTick:{alignWithLabel:!0,lineStyle:{color:j}},splitLine:{show:!1,lineStyle:{color:Z,type:"dashed"}}},yAxis:{type:"value",name:"销售额",nameTextStyle:{fontSize:m.value?10:12,color:ie,padding:[0,0,0,5]},min:0,max:function(X){return Math.ceil(X.max*1.2)},axisLabel:{fontSize:m.value?10:11,color:ie,formatter:function(X){return X>=1e4?(X/1e4).toFixed(1)+"万":X}},axisLine:{show:!0,lineStyle:{color:j,width:1}},axisTick:{show:!0,lineStyle:{color:j}},splitLine:{show:!0,lineStyle:{color:Z,type:"dashed",width:1}}},series:[{name:"真实销售",type:"line",data:n,smooth:!0,symbol:"circle",symbolSize:m.value?3:4,sampling:"average",itemStyle:{color:we,borderWidth:2,borderColor:c.value?"rgba(92, 223, 108, 1)":"rgba(76, 175, 80, 1)",shadowColor:c.value?"rgba(92, 223, 108, 0.5)":"rgba(76, 175, 80, 0.5)",shadowBlur:5},lineStyle:{width:2,color:we},areaStyle:{color:$e,opacity:.8,shadowColor:c.value?"rgba(92, 223, 108, 0.2)":"rgba(76, 175, 80, 0.2)",shadowBlur:10},emphasis:{itemStyle:{borderWidth:3,shadowBlur:10},lineStyle:{width:3}},markPoint:{symbol:"pin",symbolSize:40,data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}],label:{formatter:function(X){return X.data.value.toFixed(0)},position:"inside",distance:5,fontSize:10}},z:2,animationDuration:Ge,animationEasing:"cubicOut"},{name:"预测销售",type:"line",data:ve,smooth:!0,symbol:"emptyCircle",symbolSize:m.value?3:4,sampling:"average",itemStyle:{color:fe,borderWidth:2,borderColor:c.value?"rgba(255, 167, 38, 1)":"rgba(255, 152, 0, 1)",shadowColor:c.value?"rgba(255, 167, 38, 0.5)":"rgba(255, 152, 0, 0.5)",shadowBlur:5},lineStyle:{width:2,color:fe,type:"solid"},areaStyle:{color:Re,opacity:.6,shadowColor:c.value?"rgba(255, 167, 38, 0.2)":"rgba(255, 152, 0, 0.2)",shadowBlur:10},emphasis:{itemStyle:{borderWidth:3,shadowBlur:10},lineStyle:{width:3}},z:1,animationDuration:Ge,animationDelay:300,animationEasing:"cubicOut"},{name:"趋势线",type:"line",data:[[0,he],[n.length-1,We]],showSymbol:!1,symbol:"none",lineStyle:{width:1.5,color:_.trend>0?"#4CAF50":_.trend<0?"#F44336":"#FFB74D",type:"dashed"},emphasis:{lineStyle:{width:2.5}},tooltip:{show:!1},z:0,animation:!1}],animation:!0,animationThreshold:2e3,animationDuration:Ge,animationEasing:"cubicInOut",animationDelay:function(X){return X*50},graphic:[{type:"group",rotation:Math.PI/4,bounding:"raw",right:"10%",bottom:"15%",z:-100,children:[{type:"text",left:"center",top:"center",z:-100,style:{text:"销售预测",fontSize:30,fontFamily:"sans-serif",fontWeight:"bold",fill:c.value?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"}}]}]};i.setOption(Ue),i.resize(),i.on("click",function(X){X.componentType==="series"&&console.log("点击了数据点:",X.name,X.value)}),setTimeout(()=>{O.value=!1},500)}catch(s){console.error("初始化图表时出错:",s),O.value=!1}})}},W=()=>{if(i)try{i.resize()}catch(s){console.log("调整大小出错:",s)}},U=()=>{z.value&&N()},me=()=>{P.value=!P.value,le()},le=()=>{setTimeout(()=>{if(i)try{i.resize()}catch(s){console.log("调整大小出错:",s)}},300)},I=()=>{z.value&&M.value&&N()},ee=()=>{K.value||(K.value=!0,w("refresh"),setTimeout(()=>{K.value=!1,U()},1e3))},de=()=>{w("export")},Fe=s=>{w("time-range-change",L[s].value),U()},Se=()=>{const s=window.scrollY||window.pageYOffset;s>100?te.value=8:te.value=2+s/100*6};return Be(()=>{d(),ye(()=>{I()}),window.addEventListener("resize",W),window.addEventListener("scroll",Se),typeof ResizeObserver<"u"&&(p=new ResizeObserver(()=>{if(i)try{i.resize()}catch(s){console.log("ResizeObserver调整大小出错:",s)}}),M.value&&M.value.parentElement&&p.observe(M.value.parentElement))}),nt(()=>{if(window.removeEventListener("resize",W),window.removeEventListener("scroll",Se),p&&(p.disconnect(),p=null),i){try{i.dispose()}catch(s){console.log("卸载时销毁实例出错:",s)}i=null}}),be(z,s=>{s&&(d(),ye(()=>{I()}))}),be(()=>[o.actualSales,o.predictedSales,o.dates,o.error,o.loading],()=>{d(),z.value&&U()},{deep:!0}),be(c,()=>{U()}),be(()=>o.isExpanded,s=>{P.value=s,z.value&&le()}),(s,n)=>{const ve=l("v-spacer"),ie=l("v-chip"),xe=l("v-tooltip"),j=l("v-card-title"),Z=l("v-progress-circular"),Ie=l("v-skeleton-loader"),Q=l("v-fade-transition"),V=l("v-icon"),we=l("v-card"),fe=l("v-col"),$e=l("v-row"),Re=l("v-expand-transition"),he=l("v-chip-group"),We=l("v-slide-y-transition"),Ue=l("v-card-text"),X=l("v-scale-transition"),Ne=l("v-btn"),ke=l("v-card-actions"),Le=l("v-divider"),pe=l("v-list-item-title"),ge=l("v-list-item"),Te=l("v-list"),Ae=l("v-container");return T(),oe(Ae,{fluid:"",class:"sales-forecast-container"},{default:t(()=>[e(we,{elevation:"2",class:Y(["sales-card pa-4",[c.value?"dark-card":"","animate-in"]]),style:Ye(ae.value)},{default:t(()=>[n[31]||(n[31]=a("div",{class:"card-ripple-effect"},null,-1)),e(j,{class:"text-h5 font-weight-medium mb-2 d-flex align-center"},{default:t(()=>[n[1]||(n[1]=a("div",{class:"title-container"},[a("span",{class:"title-text"},"销售数据预测"),a("div",{class:"title-underline"})],-1)),e(ve),e(xe,{location:"top",disabled:!m.value},{activator:t(({props:ze})=>[!S.loading&&se.value!==""?(T(),oe(ie,Ee({key:0},ze,{color:g.value,class:"ml-2 accuracy-chip",variant:"elevated",size:"small",label:""}),{default:t(()=>[a("span",Rt,F(se.value),1)]),_:2},1040,["color"])):_e("",!0)]),default:t(()=>[a("span",null,"预测精确度: "+F(b.value),1)]),_:1},8,["disabled"])]),_:1}),e(X,null,{default:t(()=>[e(Ue,{class:"pb-0"},{default:t(()=>[e(Q,null,{default:t(()=>[z.value?(T(),ce("div",{key:0,ref_key:"chartContainer",ref:M,class:Y(["chart-container",{"dark-chart":c.value,expanded:P.value}]),style:Ye({height:ne.value})},[O.value?(T(),ce("div",Nt,[e(Z,{indeterminate:"",color:$.value},null,8,["color"])])):_e("",!0)],6)):(T(),oe(Ie,{key:1,class:Y(["chart-skeleton rounded-lg",{"dark-skeleton":c.value}]),height:ne.value,type:"card",loading:S.loading},{default:t(()=>n[2]||(n[2]=[a("div",{class:"skeleton-animation"},null,-1)])),_:1},8,["class","height","loading"]))]),_:1}),e(Re,null,{default:t(()=>[z.value&&!O.value?(T(),ce("div",Bt,[e($e,{"no-gutters":""},{default:t(()=>[e(fe,{cols:"12",sm:"6",md:"3",class:"metric-col"},{default:t(()=>[e(we,{class:Y(["metric-card mx-1 my-1",c.value?"dark-metric-card":""])},{default:t(()=>[a("div",Vt,[e(V,{color:f.average,size:"24"},{default:t(()=>n[3]||(n[3]=[u("mdi-chart-line")])),_:1},8,["color"])]),a("div",Ot,[n[4]||(n[4]=a("div",{class:"metric-title"},"平均销售额",-1)),a("div",qt,F(h(_.averageSales)),1)])]),_:1},8,["class"])]),_:1}),e(fe,{cols:"12",sm:"6",md:"3",class:"metric-col"},{default:t(()=>[e(we,{class:Y(["metric-card mx-1 my-1",c.value?"dark-metric-card":""])},{default:t(()=>[a("div",Wt,[e(V,{color:f.peak,size:"24"},{default:t(()=>n[5]||(n[5]=[u("mdi-arrow-up-bold")])),_:1},8,["color"])]),a("div",Ut,[n[6]||(n[6]=a("div",{class:"metric-title"},"最高销售额",-1)),a("div",jt,F(h(_.peakSales)),1)])]),_:1},8,["class"])]),_:1}),e(fe,{cols:"12",sm:"6",md:"3",class:"metric-col"},{default:t(()=>[e(we,{class:Y(["metric-card mx-1 my-1",c.value?"dark-metric-card":""])},{default:t(()=>[a("div",Gt,[e(V,{color:f.growth,size:"24"},{default:t(()=>n[7]||(n[7]=[u("mdi-trending-up")])),_:1},8,["color"])]),a("div",Yt,[n[8]||(n[8]=a("div",{class:"metric-title"},"预测增长率",-1)),a("div",{class:Y(["metric-value",re.value])},F(r(_.growthRate)),3)])]),_:1},8,["class"])]),_:1}),e(fe,{cols:"12",sm:"6",md:"3",class:"metric-col"},{default:t(()=>[e(we,{class:Y(["metric-card mx-1 my-1",c.value?"dark-metric-card":""])},{default:t(()=>[a("div",Ht,[e(V,{color:f.error,size:"24"},{default:t(()=>n[9]||(n[9]=[u("mdi-percent")])),_:1},8,["color"])]),a("div",Jt,[n[10]||(n[10]=a("div",{class:"metric-title"},"预测误差",-1)),a("div",{class:Y(["metric-value",ue.value])},F(r(Math.abs(S.error))),3)])]),_:1},8,["class"])]),_:1})]),_:1})])):_e("",!0)]),_:1}),e(We,null,{default:t(()=>[z.value&&!O.value?(T(),ce("div",Xt,[e(he,{modelValue:E.value,"onUpdate:modelValue":[n[0]||(n[0]=ze=>E.value=ze),Fe],"selected-class":"selected-time-range",mandatory:""},{default:t(()=>[(T(),ce(st,null,rt(L,(ze,je)=>e(ie,{key:je,value:je,class:Y(["time-range-chip",je===E.value?"active-time-range":""]),variant:"elevated",size:"small"},{default:t(()=>[u(F(ze.label),1)]),_:2},1032,["value","class"])),64))]),_:1},8,["modelValue"])])):_e("",!0)]),_:1})]),_:1})]),_:1}),z.value?(T(),oe(ke,{key:0},{default:t(()=>[e(ve),e(xe,{location:"top",content:"导出数据"},{activator:t(({props:ze})=>[e(Ne,Ee(ze,{icon:"mdi-download",variant:"text",size:"small",class:"action-btn",ripple:!1,onClick:de}),{default:t(()=>[e(V,null,{default:t(()=>n[11]||(n[11]=[u("mdi-download")])),_:1})]),_:2},1040)]),_:1}),e(xe,{location:"top",content:"刷新数据"},{activator:t(({props:ze})=>[e(Ne,Ee(ze,{icon:"mdi-refresh",variant:"text",size:"small",class:["action-btn",{"spin-animation":K.value}],ripple:!1,onClick:ee}),{default:t(()=>[e(V,null,{default:t(()=>n[12]||(n[12]=[u("mdi-refresh")])),_:1})]),_:2},1040,["class"])]),_:1}),e(xe,{location:"top",content:P.value?"收起详情":"展开详情"},{activator:t(({props:ze})=>[e(Ne,Ee(ze,{icon:P.value?"mdi-chevron-up":"mdi-chevron-down",variant:"text",size:"small",class:"action-btn toggle-btn",ripple:!1,onClick:me}),{default:t(()=>[e(V,null,{default:t(()=>[u(F(P.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})]),_:2},1040,["icon"])]),_:1},8,["content"])]),_:1})):_e("",!0),e(Re,null,{default:t(()=>[P.value&&z.value?(T(),ce("div",Zt,[e(Le,{class:"mb-4"}),e($e,null,{default:t(()=>[e(fe,{cols:"12",sm:"6"},{default:t(()=>[a("div",Kt,[a("div",Qt,[e(V,{size:"small",color:c.value?"#aaa":"#666",class:"mr-2"},{default:t(()=>n[13]||(n[13]=[u("mdi-calendar-range")])),_:1},8,["color"]),n[14]||(n[14]=a("span",null,"时间区间分析",-1))]),a("div",ea,[e(Te,{density:"compact",class:Y(c.value?"dark-list":"")},{default:t(()=>[e(ge,null,{prepend:t(()=>[e(V,{size:"small",color:"info"},{default:t(()=>n[15]||(n[15]=[u("mdi-calendar-start")])),_:1})]),default:t(()=>[e(pe,null,{default:t(()=>[n[16]||(n[16]=u(" 开始日期: ")),a("strong",null,F(D(S.dates[0])),1)]),_:1})]),_:1}),e(ge,null,{prepend:t(()=>[e(V,{size:"small",color:"info"},{default:t(()=>n[17]||(n[17]=[u("mdi-calendar-end")])),_:1})]),default:t(()=>[e(pe,null,{default:t(()=>[n[18]||(n[18]=u(" 结束日期: ")),a("strong",null,F(D(S.dates[S.dates.length-1])),1)]),_:1})]),_:1}),e(ge,null,{prepend:t(()=>[e(V,{size:"small",color:"info"},{default:t(()=>n[19]||(n[19]=[u("mdi-calendar-clock")])),_:1})]),default:t(()=>[e(pe,null,{default:t(()=>[n[20]||(n[20]=u(" 数据周期: ")),a("strong",null,F(S.dates.length)+"天",1)]),_:1})]),_:1})]),_:1},8,["class"])])])]),_:1}),e(fe,{cols:"12",sm:"6"},{default:t(()=>[a("div",ta,[a("div",aa,[e(V,{size:"small",color:c.value?"#aaa":"#666",class:"mr-2"},{default:t(()=>n[21]||(n[21]=[u("mdi-chart-bell-curve")])),_:1},8,["color"]),n[22]||(n[22]=a("span",null,"预测精度指标",-1))]),a("div",la,[e(Te,{density:"compact",class:Y(c.value?"dark-list":"")},{default:t(()=>[e(ge,null,{prepend:t(()=>[e(V,{size:"small",color:"primary"},{default:t(()=>n[23]||(n[23]=[u("mdi-chart-scatter-plot")])),_:1})]),default:t(()=>[e(pe,null,{default:t(()=>[n[24]||(n[24]=u(" 平均绝对误差 (MAE): ")),a("strong",null,F(h(_.mae)),1)]),_:1})]),_:1}),e(ge,null,{prepend:t(()=>[e(V,{size:"small",color:"primary"},{default:t(()=>n[25]||(n[25]=[u("mdi-sigma")])),_:1})]),default:t(()=>[e(pe,null,{default:t(()=>[n[26]||(n[26]=u(" 均方根误差 (RMSE): ")),a("strong",null,F(h(_.rmse)),1)]),_:1})]),_:1}),e(ge,null,{prepend:t(()=>[e(V,{size:"small",color:"primary"},{default:t(()=>n[27]||(n[27]=[u("mdi-chart-timeline-variant")])),_:1})]),default:t(()=>[e(pe,null,{default:t(()=>[n[28]||(n[28]=u(" 确定系数 (R²): ")),a("strong",null,F(h(_.r2)),1)]),_:1})]),_:1})]),_:1},8,["class"])])])]),_:1}),e(fe,{cols:"12",class:"mt-2"},{default:t(()=>[a("div",oa,[a("div",na,[e(V,{size:"small",color:c.value?"#aaa":"#666",class:"mr-2"},{default:t(()=>n[29]||(n[29]=[u("mdi-trending-up")])),_:1},8,["color"]),n[30]||(n[30]=a("span",null,"趋势分析",-1))]),a("div",sa,[a("div",ra,[a("div",{class:Y(["trend-arrow",v.value])},[e(V,null,{default:t(()=>[u(F(H.value),1)]),_:1})],2),a("div",ia,F(q.value),1)]),a("div",ca,F(J()),1)])])]),_:1})]),_:1})])):_e("",!0)]),_:1})]),_:1},8,["class","style"])]),_:1})}}},Ve=Pe(ua,[["__scopeId","data-v-04cacb12"]]),da={class:"alpha-value-display mb-2"},va={class:"d-flex justify-space-between align-center"},ma={class:"slider-container"},fa={class:"thumb-label-content"},pa={key:0,class:"preview-container pt-1"},ha={class:"preview-content"},ga={class:"preview-text"},_a={class:"font-weight-medium"},ba={class:"weight-distribution"},ya={class:"weight-item"},xa={class:"weight-value primary--text"},wa={class:"weight-item"},Ca={class:"weight-value secondary--text"},Sa={class:"d-flex align-center"},ka=Object.assign({name:"AlphaSliderTool"},{__name:"AlphaSlider",emits:["update:alpha","saved"],setup(S,{expose:y,emit:o}){const w=o,M={mounted:k=>{k.classList.add("text-reveal-animation"),setTimeout(()=>{k.classList.remove("text-reveal-animation")},600)},updated:k=>{k.classList.add("text-reveal-animation"),setTimeout(()=>{k.classList.remove("text-reveal-animation")},600)}},i=C(.6),p=C("0.60"),R=C(.6),B=C(!0),A=C(""),m=C(!1),x=C(!1),c=C(!1),P=C(!1),O=C(!0),K=C(.6),E=C({show:!1,text:"",color:"success",timeout:3e3,icon:"mdi-check-circle"});let te=null;const z=C(!1),ne=G(()=>i.value<=.3?"blue":i.value<=.6?"primary":i.value<=.8?"orange":"red"),ae=G(()=>i.value<=.3?"blue--text":i.value<=.6?"primary--text":i.value<=.8?"orange--text":"red--text"),se=G(()=>K.value!==i.value);be(i,(k,d)=>{!O.value&&Math.abs(k-d)>.001&&(P.value=!0,p.value=k.toFixed(2),te&&clearTimeout(te),z.value||$())}),be(x,k=>{k&&ye(()=>{m.value=!0})}),be(se,k=>{k&&x.value&&re()});function b(){x.value=!x.value,x.value&&ye(()=>{g()})}function g(){document.querySelectorAll(".card-content > *").forEach((d,J)=>{d.style.opacity="0",d.style.transform="translateY(10px)",setTimeout(()=>{d.style.transition="opacity 0.3s ease, transform 0.3s ease",d.style.opacity="1",d.style.transform="translateY(0)"},50+J*50)})}function $(){te=setTimeout(()=>{const k=document.querySelector(".alpha-value-display");k&&(k.classList.add("pulse-animation"),setTimeout(()=>{k.classList.remove("pulse-animation")},600))},100)}function re(){const k=document.querySelector(".save-btn");k&&(k.classList.add("pulse-animation"),setTimeout(()=>{k.classList.remove("pulse-animation")},600))}function ue(){z.value=!0,v(),m.value=!0,setTimeout(()=>{z.value=!1},100)}function v(){typeof p.value=="string"&&(p.value=p.value.replace(/[^\d.-]/g,""));const k=parseFloat(p.value);if(isNaN(k)){B.value=!1,A.value="请输入有效数字";return}k<0?(B.value=!1,A.value="Alpha不能小于0"):k>1?(B.value=!1,A.value="Alpha不能大于1"):(B.value=!0,A.value="")}function H(){if(B.value){const k=parseFloat(p.value);isNaN(k)||(i.value=Math.max(0,Math.min(1,k)),p.value=i.value.toFixed(2),m.value=!0)}}function q(){if(!B.value)return;const k=document.querySelector(".apply-btn");k.classList.add("button-pulse"),setTimeout(()=>{k.classList.remove("button-pulse")},300),K.value=i.value,P.value=!1,m.value=!0;const d=document.querySelector(".preview-container");d&&(d.classList.add("preview-highlight"),setTimeout(()=>{d.classList.remove("preview-highlight")},600)),console.log(`应用Alpha值: ${i.value}`),L(),w("update:alpha",i.value),_("参数已应用","success","mdi-check-circle")}function f(){const k=i.value;i.value=R.value,p.value=i.value.toFixed(2),v(),m.value=!0,Math.abs(k-i.value)>.001&&_("参数已重置为默认值","info","mdi-refresh"),w("update:alpha",i.value)}function L(){c.value=!0,setTimeout(()=>{console.log(`保存Alpha值: ${i.value}`),localStorage.setItem("exponentialSmoothingAlpha",i.value),K.value=i.value,P.value=!1,c.value=!1,_("设置已保存","success","mdi-content-save"),w("saved",i.value)},600)}function _(k,d,J){E.value={show:!0,text:k,color:d,timeout:3e3,icon:J}}return(()=>{console.log("Hello");const k=localStorage.getItem("exponentialSmoothingAlpha");k!==null?(i.value=parseFloat(k),K.value=i.value):K.value=R.value,p.value=i.value.toFixed(2),setTimeout(()=>{O.value=!1},500)})(),Be(()=>{const k=document.querySelector(".v-slider__thumb");k&&(k.addEventListener("mousedown",()=>{document.querySelector(".alpha-slider").classList.add("slider-active")}),document.addEventListener("mouseup",()=>{document.querySelector(".alpha-slider").classList.remove("slider-active")}))}),y({vTextReveal:M,toggleExpand:b,onSliderInput:ue,validateAlpha:v,applyManualInput:H,applyAlpha:q,resetAlpha:f,saveAlpha:L}),(k,d)=>{const J=l("v-icon"),h=l("v-card-title"),r=l("v-spacer"),D=l("v-avatar"),N=l("v-chip"),W=l("v-btn"),U=l("v-divider"),me=l("v-progress-linear"),le=l("v-scale-transition"),I=l("v-slider"),ee=l("v-text-field"),de=l("v-col"),Fe=l("v-row"),Se=l("v-alert"),s=l("v-expand-transition"),n=l("v-card-text"),ve=l("v-card-actions"),ie=l("v-card"),xe=l("v-snackbar"),j=l("v-container");return T(),oe(j,{class:"pa-2 alpha-slider-container"},{default:t(()=>[e(ie,{class:Y(["alpha-slider-card",{expanded:x.value}]),elevation:"2",rounded:"lg",style:Ye({maxHeight:x.value?"320px":"80px"})},{default:t(()=>[a("div",{class:"d-flex align-center card-header",onClick:b},[e(h,{class:"text-h6 font-weight-medium py-2 pl-4 card-title"},{default:t(()=>[e(J,{class:Y(["mr-2 rotate-icon",{rotated:x.value}])},{default:t(()=>d[4]||(d[4]=[u(" mdi-tune ")])),_:1},8,["class"]),d[5]||(d[5]=u(" 指数预测法参数调节 "))]),_:1}),e(r),e(N,{class:"alpha-chip ma-2",color:ne.value,pill:"",small:"",outlined:""},{default:t(()=>[e(D,{left:""},{default:t(()=>[e(J,{small:""},{default:t(()=>d[6]||(d[6]=[u("mdi-alpha")])),_:1})]),_:1}),u(" "+F(i.value.toFixed(2)),1)]),_:1},8,["color"]),e(W,{icon:"",small:"",class:Y(["expand-btn mr-2",{rotated:x.value}]),onClick:ht(b,["stop"])},{default:t(()=>[e(J,null,{default:t(()=>d[7]||(d[7]=[u("mdi-chevron-down")])),_:1})]),_:1},8,["class"])]),e(s,null,{default:t(()=>[tt(a("div",null,[e(U),e(n,{class:"pa-3 card-content"},{default:t(()=>[a("div",da,[a("div",va,[d[8]||(d[8]=a("span",{class:"caption"},"Alpha参数值:",-1)),tt((T(),ce("span",{class:Y(["font-weight-bold",ae.value])},[u(F(i.value.toFixed(2)),1)],2)),[[M]])]),e(le,null,{default:t(()=>[e(me,{value:i.value*100,height:"4",rounded:"",color:ne.value,"background-opacity":"0.2",class:"mt-1"},null,8,["value","color"])]),_:1})]),a("div",ma,[e(I,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=Z=>i.value=Z),min:0,max:1,step:.01,"thumb-label":"always","thumb-color":"primary","track-color":"grey lighten-2",color:"primary",dense:"",class:"alpha-slider","hide-details":"",onInput:ue},{"thumb-label":t(()=>[a("div",fa,F(i.value.toFixed(2)),1)]),prepend:t(()=>[e(J,{small:"",class:"mr-1 slider-icon",color:"grey darken-1"},{default:t(()=>d[9]||(d[9]=[u("mdi-weight")])),_:1}),d[10]||(d[10]=a("span",{class:"caption mr-1"},"0",-1))]),append:t(()=>[d[12]||(d[12]=a("span",{class:"caption ml-1"},"1",-1)),e(J,{small:"",class:"ml-1 slider-icon",color:"primary"},{default:t(()=>d[11]||(d[11]=[u("mdi-weight")])),_:1})]),_:1},8,["modelValue"])]),e(Fe,{class:"mt-0"},{default:t(()=>[e(de,{cols:"12",sm:"7",class:"py-1"},{default:t(()=>[e(ee,{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=Z=>p.value=Z),modelModifiers:{number:!0},label:"Alpha值",type:"number",min:"0",max:"1",step:"0.01",outlined:"",dense:"","hide-details":"",class:"alpha-input",error:!B.value,"error-messages":A.value,onInput:v,onBlur:H,onKeydown:gt(H,["enter"])},null,8,["modelValue","error","error-messages"])]),_:1}),e(de,{cols:"12",sm:"5",class:"py-1"},{default:t(()=>[e(W,{color:"primary",block:"",small:"",elevation:"1",class:"apply-btn tw:mt-2",disabled:!B.value,onClick:q},{default:t(()=>[e(J,{left:"",small:""},{default:t(()=>d[13]||(d[13]=[u("mdi-check")])),_:1}),d[14]||(d[14]=u(" 应用参数 "))]),_:1},8,["disabled"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[m.value?(T(),ce("div",pa,[e(le,{group:""},{default:t(()=>[e(Se,{bordered:"left",dense:"",text:"",class:"preview-alert mt-2 mb-0 tw:!bg-m-info tw:dark:!bg-m-info-dark",key:"preview-alert"},{default:t(()=>[a("div",ha,[a("div",ga,[d[15]||(d[15]=u(" 当前Alpha值为 ")),a("span",_a,F(i.value.toFixed(2)),1)]),a("div",ba,[a("div",ya,[d[16]||(d[16]=a("span",{class:"weight-label"},"新数据权重",-1)),e(me,{value:i.value*100,height:"6",rounded:"",color:"primary","background-opacity":"0.1",class:"weight-bar"},null,8,["value"]),a("span",xa,F((i.value*100).toFixed(0))+"%",1)]),a("div",wa,[d[17]||(d[17]=a("span",{class:"weight-label"},"历史数据权重",-1)),e(me,{value:(1-i.value)*100,height:"6",rounded:"",color:"secondary","background-opacity":"0.1",class:"weight-bar"},null,8,["value"]),a("span",Ca,F(((1-i.value)*100).toFixed(0))+"%",1)])])])]),_:1})]),_:1})])):_e("",!0)]),_:1})]),_:1}),e(U),e(ve,{class:"pa-2"},{default:t(()=>[e(W,{text:"",small:"",color:"grey",class:"action-btn mr-2",onClick:f},{default:t(()=>[e(J,{left:"","x-small":""},{default:t(()=>d[18]||(d[18]=[u("mdi-refresh")])),_:1}),d[19]||(d[19]=u(" 重置 "))]),_:1}),e(r),e(W,{color:"success",small:"",class:"action-btn save-btn",elevation:"1",loading:c.value,onClick:L},{default:t(()=>[e(J,{left:"","x-small":""},{default:t(()=>d[20]||(d[20]=[u("mdi-content-save")])),_:1}),d[21]||(d[21]=u(" 保存设置 "))]),_:1},8,["loading"])]),_:1})],512),[[_t,x.value]])]),_:1})]),_:1},8,["class","style"]),e(xe,{modelValue:E.value.show,"onUpdate:modelValue":d[3]||(d[3]=Z=>E.value.show=Z),color:E.value.color,timeout:E.value.timeout,bottom:"",right:"",class:"notification-snackbar"},{action:t(({attrs:Z})=>[e(W,Ee({text:"","x-small":""},Z,{onClick:d[2]||(d[2]=Ie=>E.value.show=!1)}),{default:t(()=>d[22]||(d[22]=[u(" 关闭 ")])),_:2},1040)]),default:t(()=>[a("div",Sa,[e(J,{small:"",class:"mr-2"},{default:t(()=>[u(F(E.value.icon),1)]),_:1}),u(" "+F(E.value.text),1)])]),_:1},8,["modelValue","color","timeout"])]),_:1})}}}),Aa=Pe(ka,[["__scopeId","data-v-6d8851ef"]]),za={class:"text-center"},Fa={class:"text-center"},$a={class:"text-center"},La={__name:"updateArimaPrams",emits:["update-arima-params"],setup(S,{emit:y}){const o=C(!1),w=C(7),M=C(1),i=C(0),p=[...Array(21).keys()].filter(A=>A%5===0).map(String),R=y,B=()=>{localStorage.setItem("arimaParam",JSON.stringify({p:w.value,d:M.value,q:i.value})),R("update-arima-params",{p:w.value,d:M.value,q:i.value}),o.value=!1};return(()=>{let A=localStorage.getItem("arimaParam");A&&(A=JSON.parse(A),w.value=A.p,i.value=A.q,M.value=A.d)})(),(A,m)=>{const x=l("v-btn"),c=l("v-card-title"),P=l("v-slider"),O=l("v-col"),K=l("v-row"),E=l("v-card-text"),te=l("v-spacer"),z=l("v-card-actions"),ne=l("v-card"),ae=l("v-menu"),se=l("v-chip");return T(),ce("div",null,[e(ae,{modelValue:o.value,"onUpdate:modelValue":m[4]||(m[4]=b=>o.value=b),"close-on-content-click":!1},{activator:t(({props:b})=>[e(x,Ee({color:"primary"},b,{"prepend-icon":"mdi-tune"}),{default:t(()=>m[5]||(m[5]=[u(" ARIMA 参数设置 ")])),_:2},1040)]),default:t(()=>[e(ne,{"min-width":"300",class:"pa-4"},{default:t(()=>[e(c,null,{default:t(()=>m[6]||(m[6]=[u("ARIMA 参数配置")])),_:1}),e(E,null,{default:t(()=>[e(K,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(P,{modelValue:w.value,"onUpdate:modelValue":m[0]||(m[0]=b=>w.value=b),min:0,max:20,step:"1",label:"p (自回归项数)","thumb-label":"","show-ticks":"always","tick-size":4,"tick-labels":at(p)},null,8,["modelValue","tick-labels"]),a("div",za,"p: "+F(w.value),1)]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(P,{modelValue:M.value,"onUpdate:modelValue":m[1]||(m[1]=b=>M.value=b),min:0,max:5,step:"1",label:"d (差分次数)","thumb-label":"","show-ticks":"always"},null,8,["modelValue"]),a("div",Fa,"d: "+F(M.value),1)]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(P,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=b=>i.value=b),min:0,max:20,step:"1",label:"q (移动平均项数)","thumb-label":"","show-ticks":"always","tick-size":4,"tick-labels":at(p)},null,8,["modelValue","tick-labels"]),a("div",$a,"q: "+F(i.value),1)]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(te),e(x,{color:"primary",onClick:B},{default:t(()=>m[7]||(m[7]=[u(" 更新参数 ")])),_:1}),e(x,{color:"grey",onClick:m[3]||(m[3]=b=>o.value=!1)},{default:t(()=>m[8]||(m[8]=[u(" 关闭 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{class:"ml-3",color:"info"},{default:t(()=>[u(" 当前ARIMA参数: ("+F(w.value)+", "+F(M.value)+", "+F(i.value)+") ",1)]),_:1})])}}},Da=Pe(La,[["__scopeId","data-v-b84cf1a1"]]),Ma={class:"mb-0"},Ia={class:"mb-0"},Ea={__name:"DickeyFullerChart",props:{testDataString:{type:String,required:!0}},setup(S){He([dt,Ze,vt,Xe,Ke,mt,Je,Qe]);const y=S,o=C(null);let w=null,M=null;const i=C("original"),p=C({origin:[],rolling_mean:[],rolling_std:[],adf_statistic:0,p_value:0,critical_values:{"1%":0,"5%":0,"10%":0}}),R=G(()=>p.value.adf_statistic<p.value.critical_values["5%"]),B=b=>{try{const g=JSON.parse(b);return{origin:g.origin,rolling_mean:g.rolling_mean.map($=>$==="NaN"?null:$),rolling_std:g.rolling_std.map($=>$==="NaN"?null:$),adf_statistic:g.adf_statistic,p_value:g.p_value,critical_values:g.critical_values}}catch(g){return console.error("解析数据时出错:",g),{origin:[],rolling_mean:[],rolling_std:[],adf_statistic:0,p_value:0,critical_values:{"1%":0,"5%":0,"10%":0}}}},A=(b,g=!1)=>b==null?"N/A":g&&Math.abs(b)<1e-4?b.toExponential(6):parseFloat(b.toFixed(6)),m=(b,g)=>b<g["5%"]?"mdi-check-circle":"mdi-alert",x=(b,g)=>b<g["5%"]?"success":"warning",c=b=>b<.05?"mdi-check-circle":"mdi-alert",P=b=>b<.05?"success":"warning",O=(b,g)=>b<g?"success":"grey",K=()=>R.value?`ADF 统计量 (${A(p.value.adf_statistic)}) 小于所有临界值,P值 (${A(p.value.p_value,!0)}) 非常小,因此我们可以拒绝原序列存在单位根的原假设,认为序列是平稳的。`:`ADF 统计量 (${A(p.value.adf_statistic)}) 大于部分或全部临界值,P值 (${A(p.value.p_value,!0)}) 较大,因此我们不能拒绝原序列存在单位根的原假设,序列可能不是平稳的。`,E=()=>{w&&w.resize()},te=()=>{o.value&&(w&&w.dispose(),w=qe(o.value),ae(),window.ResizeObserver&&(M=new ResizeObserver(ne(()=>{w&&w.resize()},100)),M.observe(o.value)),window.addEventListener("resize",E),z())},z=()=>{if(!o.value)return;let b=o.value,g=null;for(let $=0;$<10&&(b=b.parentElement,!!b);$++)if(b.classList.contains("v-expansion-panel-content")||b.classList.contains("v-expansion-panel")||b.classList.contains("v-accordion")){g=b;break}g&&g.addEventListener("transitionend",()=>{ye(()=>{w&&w.resize()})})},ne=(b,g)=>{let $=null;return function(){const re=this,ue=arguments;clearTimeout($),$=setTimeout(()=>{b.apply(re,ue)},g)}},ae=()=>{if(!w)return;const b={title:{text:i.value==="original"?"原始时间序列":"滚动统计量",left:"center"},tooltip:{trigger:"axis",formatter:function(g){let $=`索引: ${g[0].dataIndex}<br/>`;return g.forEach(re=>{$+=`${re.seriesName}: ${re.value==="NaN"?"NaN":A(re.value)}<br/>`}),$}},legend:{data:i.value==="original"?["原始数据"]:["原始数据","滚动均值","滚动标准差"],bottom:0},grid:{left:"3%",right:"4%",bottom:"60px",containLabel:!0},toolbox:{feature:{saveAsImage:{title:"保存为图片"}}},dataZoom:[{type:"slider",start:0,end:100,bottom:25},{type:"inside",start:0,end:100}],xAxis:{type:"category",boundaryGap:!1,data:Array.from({length:p.value.origin.length},(g,$)=>$),name:"观测索引"},yAxis:{type:"value",name:"值"},series:se()};w.setOption(b),setTimeout(()=>{w&&w.resize()},50)},se=()=>{if(i.value==="original")return[{name:"原始数据",type:"line",data:p.value.origin,showSymbol:!1,lineStyle:{width:2}}];{const b=p.value.rolling_mean.map($=>$==="NaN"?null:$),g=p.value.rolling_std.map($=>$==="NaN"?null:$);return[{name:"原始数据",type:"line",data:p.value.origin,showSymbol:!1,lineStyle:{width:1,opacity:.5}},{name:"滚动均值",type:"line",data:b,showSymbol:!1,lineStyle:{width:2}},{name:"滚动标准差",type:"line",data:g,showSymbol:!1,lineStyle:{width:2,type:"dashed"}}]}};return be(i,()=>{ae()}),be(()=>y.testDataString,b=>{const g=B(b);p.value=g,w&&ae()},{immediate:!0}),Be(()=>{const b=B(y.testDataString);p.value=b,ye(()=>{te()});const g=setInterval(()=>{w&&o.value&&o.value.offsetHeight>0&&w.resize()},500);setTimeout(()=>{clearInterval(g)},3e4)}),nt(()=>{window.removeEventListener("resize",E),M&&M.disconnect(),w&&(w.dispose(),w=null)}),(b,g)=>{const $=l("v-card-title"),re=l("v-icon"),ue=l("v-list-item-title"),v=l("v-list-item"),H=l("v-list"),q=l("v-card-text"),f=l("v-card"),L=l("v-chip"),_=l("v-chip-group"),k=l("v-col"),d=l("v-alert"),J=l("v-row"),h=l("v-btn"),r=l("v-btn-toggle"),D=l("v-container");return T(),oe(D,null,{default:t(()=>[e(f,null,{default:t(()=>[e($,{class:"text-center"},{default:t(()=>g[1]||(g[1]=[u("ARIMA 模型 Dickey-Fuller 测试结果")])),_:1}),e(q,null,{default:t(()=>[e(J,null,{default:t(()=>[e(k,{cols:"12",md:"6"},{default:t(()=>[e(f,{elevation:"2",class:"mb-4"},{default:t(()=>[e($,{class:"text-subtitle-1"},{default:t(()=>g[2]||(g[2]=[u("ADF 测试统计结果")])),_:1}),e(q,null,{default:t(()=>[e(H,null,{default:t(()=>[e(v,null,{prepend:t(()=>[e(re,{color:x(p.value.adf_statistic,p.value.critical_values)},{default:t(()=>[u(F(m(p.value.adf_statistic,p.value.critical_values)),1)]),_:1},8,["color"])]),default:t(()=>[e(ue,null,{default:t(()=>[u("ADF 统计量: "+F(A(p.value.adf_statistic)),1)]),_:1})]),_:1}),e(v,null,{prepend:t(()=>[e(re,{color:P(p.value.p_value)},{default:t(()=>[u(F(c(p.value.p_value)),1)]),_:1},8,["color"])]),default:t(()=>[e(ue,null,{default:t(()=>[u("P 值: "+F(A(p.value.p_value,!0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{elevation:"2"},{default:t(()=>[e($,{class:"text-subtitle-1"},{default:t(()=>g[3]||(g[3]=[u("临界值")])),_:1}),e(q,null,{default:t(()=>[e(_,null,{default:t(()=>[(T(!0),ce(st,null,rt(p.value.critical_values,(N,W)=>(T(),oe(L,{key:W,color:O(p.value.adf_statistic,N)},{default:t(()=>[u(F(W)+": "+F(A(N)),1)]),_:2},1032,["color"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{cols:"12",md:"6"},{default:t(()=>[e(f,{elevation:"2",class:"h-100"},{default:t(()=>[e($,{class:"text-subtitle-1"},{default:t(()=>g[4]||(g[4]=[u("平稳性结论")])),_:1}),e(q,null,{default:t(()=>[e(d,{type:R.value?"success":"warning",icon:R.value?"mdi-check-circle":"mdi-alert",bordered:"left",class:"mb-4"},{default:t(()=>[a("strong",null,F(R.value?"数据是平稳的":"数据不是平稳的"),1),a("p",Ma,F(K()),1)]),_:1},8,["type","icon"]),e(d,{type:"info",icon:"mdi-information",bordered:"left"},{default:t(()=>[g[5]||(g[5]=a("strong",null,"临界值解释:",-1)),a("p",Ia," ADF 统计量 ("+F(A(p.value.adf_statistic))+") "+F(R.value?"小于":"大于")+" 5% 临界值 ("+F(A(p.value.critical_values["5%"]))+"), 所以在 5% 的显著性水平上 "+F(R.value?"拒绝":"不能拒绝")+" 单位根假设。 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(J,null,{default:t(()=>[e(k,{cols:"12"},{default:t(()=>[e(f,{elevation:"2"},{default:t(()=>[e($,{class:"d-flex justify-space-between align-center"},{default:t(()=>[g[8]||(g[8]=a("span",null,"时间序列数据图",-1)),e(r,{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=N=>i.value=N),mandatory:""},{default:t(()=>[e(h,{value:"original"},{default:t(()=>g[6]||(g[6]=[u(" 原始数据 ")])),_:1}),e(h,{value:"rolling"},{default:t(()=>g[7]||(g[7]=[u(" 滚动均值/标准差 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(q,null,{default:t(()=>[a("div",{ref_key:"chartContainer",ref:o,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Ta=Pe(Ea,[["__scopeId","data-v-73c554dd"]]),Pa={class:"title-icon-container me-2"},Ra={key:0,class:"px-4 pb-2"},Na=["onMouseenter","onMouseleave"],Ba={key:0,class:"chart-actions pa-2"},Va=["onMouseenter","onMouseleave"],Oa={key:0,class:"chart-actions pa-2"},qa={key:0,class:"px-4 pb-4"},Wa={__name:"AcfPacf",props:{chartData:{type:Object,required:!0},loading:{type:Boolean,default:!1}},setup(S,{expose:y}){const o=S,w=C(null),M=C(null),i=C(null),p=C(!1),R=C(!1),B=C(!1),A=C(!1),m=C(!1);let x=null,c=null,P=null,O=null,K=C(null),E=!1,te=null;const z={primary:"#6750A4",primaryLight:"#EADDFF",secondary:"#9C27B0",secondaryLight:"#E8DEF8",tertiary:"#625B71",surface:"#FFFFFF",background:"#F8F9FA",text:"#1C1B1F",subtle:"#CAC4D0",outline:"#79747E"},ne=h=>{const r=h==="pacf",D=r?z.secondary:z.primary,N=r?z.secondaryLight:z.primaryLight;return{mainColor:D,lightColor:N,barGradient:[{offset:0,color:D+"CC"},{offset:1,color:D}],confidenceColor:"rgba(150, 150, 150, 0.3)",animation:{duration:1500,easing:"cubicOut"}}};function ae(h,r,D,N,W="acf"){if(!h.value)return;r||(r=qe(h.value));const U=ne(W),me=function(I){const ee=I[0].dataIndex;let de=`<div style="padding: 8px; line-height: 1.5;">
                    <div style="font-weight: bold; margin-bottom: 5px;">滞后期: ${D.lags[ee]}</div>
                    <div>相关值: <span style="color:${U.mainColor};font-weight:bold;">${D.values[ee].toFixed(4)}</span></div>`;return D.conf&&D.conf[ee]&&(de+=`<div>置信区间: [${D.conf[ee][0].toFixed(4)}, ${D.conf[ee][1].toFixed(4)}]</div>`),de+="</div>",de},le={title:{text:N,textStyle:{fontWeight:"normal",color:z.text,fontSize:16},left:"center",top:0,show:!1},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(0, 0, 0, 0.05)"}},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:U.mainColor,borderWidth:1,textStyle:{color:z.text},formatter:me,extraCssText:"box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); border-radius: 4px;"},grid:{left:"5%",right:"5%",bottom:"15%",top:"8%",containLabel:!0},xAxis:{type:"category",data:D.lags,name:"滞后期",nameLocation:"middle",nameGap:30,nameTextStyle:{color:z.text,fontSize:14},axisLabel:{rotate:45,margin:10,color:z.text,fontSize:12},axisLine:{lineStyle:{color:z.outline}},axisTick:{alignWithLabel:!0,lineStyle:{color:z.outline}},splitLine:{show:!1}},yAxis:{type:"value",name:"相关性",nameLocation:"middle",nameGap:40,nameTextStyle:{color:z.text,fontSize:14},min:function(I){return Math.min(-1,I.min*1.1)},max:function(I){return Math.max(1,I.max*1.1)},axisLabel:{color:z.text,fontSize:12},axisLine:{lineStyle:{color:z.outline}},splitLine:{lineStyle:{type:"dashed",color:z.subtle}}},series:[{name:"相关性",type:"bar",data:D.values,barWidth:"60%",itemStyle:{color:function(I){return I.value>=0?new Oe(0,0,0,1,U.barGradient):new Oe(0,1,0,0,U.barGradient)},borderRadius:[3,3,0,0]},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)"}},animation:!0,animationDelay:function(I){return I*50},animationDuration:U.animation.duration,animationEasing:U.animation.easing},{name:"置信区间",type:"custom",renderItem:function(I,ee){if(!D.conf)return;const de=ee.value(0),Fe=D.conf[I.dataIndex],Se=ee.coord([de,Fe[0]]),s=ee.coord([de,Fe[1]]),n=Ct({x:Se[0]-4,y:Se[1],width:8,height:s[1]-Se[1]},{x:I.coordSys.x,y:I.coordSys.y,width:I.coordSys.width,height:I.coordSys.height});return n&&{type:"rect",shape:n,style:{fill:U.confidenceColor}}},data:D.values.map((I,ee)=>[ee,I]),z:100,animation:!0,animationDuration:U.animation.duration,animationEasing:U.animation.easing},{name:"零线",type:"line",markLine:{symbol:"none",label:{show:!1},data:[{yAxis:0}],lineStyle:{color:z.outline,type:"dashed",width:1},animation:!1},z:10},{name:"置信区间线",type:"line",markLine:{symbol:"none",label:{show:!0,position:"start",formatter:"95% 置信区间",fontSize:12,color:z.tertiary},data:[{yAxis:D.conf&&D.conf.length>0?D.conf[0][1]:.2,lineStyle:{color:z.tertiary,type:"dotted"}},{yAxis:D.conf&&D.conf.length>0?D.conf[0][0]:-.2,lineStyle:{color:z.tertiary,type:"dotted"}}],animation:!0,animationDuration:U.animation.duration+300,animationEasing:"cubicOut"},z:11}],dataZoom:[{type:"inside",start:0,end:100,zoomLock:!1,throttle:100},{type:"slider",show:!0,start:0,end:100,height:20,bottom:5,borderColor:"transparent",fillerColor:U.lightColor,handleStyle:{color:U.mainColor,borderColor:U.mainColor},moveHandleStyle:{color:U.mainColor},emphasis:{handleStyle:{borderWidth:2,color:U.mainColor},moveHandleStyle:{color:U.mainColor}},textStyle:{color:z.text},brushSelect:!1}],responsive:!0,animation:!0,animationThreshold:2e3,animationDuration:U.animation.duration,animationEasing:U.animation.easing,animationDelay:function(I){return I*50}};return r.setOption(le,!0),r.on("click",function(I){if(I.componentType==="series"&&I.seriesName==="相关性"){const ee=D.lags[I.dataIndex],de=D.values[I.dataIndex];r.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:I.dataIndex}),setTimeout(()=>{r.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:I.dataIndex})},1e3),console.log(`选中的滞后期: ${ee}, 相关性值: ${de}`)}}),r}function se(h){const r=h==="acf"?x:c,D=h==="acf"?"自相关函数":"偏自相关函数";if(r){const N=r.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),W=document.createElement("a");W.download=`${D}_${new Date().toISOString().split("T")[0]}.png`,W.href=N,document.body.appendChild(W),W.click(),document.body.removeChild(W),re(r)}}function b(h){h==="acf"&&x?$(x,o.chartData.acf,"自相关函数","acf"):h==="pacf"&&c&&$(c,o.chartData.pacf,"偏自相关函数","pacf")}function g(){m.value=!0,setTimeout(()=>{x&&o.chartData.acf&&$(x,o.chartData.acf,"自相关函数","acf"),setTimeout(()=>{c&&o.chartData.pacf&&$(c,o.chartData.pacf,"偏自相关函数","pacf"),setTimeout(()=>{m.value=!1},300)},300)},300)}function $(h,r,D,N){const W={series:[{data:Array(r.values.length).fill(0)}]};h.setOption(W),setTimeout(()=>{ae(N==="acf"?w:M,h,r,D,N)},300)}function re(h){const r=h.getOption(),D=JSON.parse(JSON.stringify(r.series[0].emphasis||{}));h.setOption({series:[{emphasis:{itemStyle:{shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});for(let N=0;N<r.series[0].data.length;N++)h.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:N});setTimeout(()=>{for(let N=0;N<r.series[0].data.length;N++)h.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:N});h.setOption({series:[{emphasis:D}]})},500)}function ue(){ye(()=>{A.value=o.loading,o.chartData&&o.chartData.acf&&(x=ae(w,x,o.chartData.acf,"自相关函数","acf")),o.chartData&&o.chartData.pacf&&(c=ae(M,c,o.chartData.pacf,"偏自相关函数","pacf")),setTimeout(()=>{A.value=!1},600)})}function v(){x&&x.resize(),c&&c.resize()}function H(){ye(()=>{setTimeout(()=>{v(),setTimeout(()=>{v()},200)},100)})}function q(){if(!w.value)return!1;const h=w.value.getBoundingClientRect(),r=E;return E=h.width>0&&h.height>0&&h.top<=(window.innerHeight||document.documentElement.clientHeight)&&h.bottom>=0,!r&&E&&H(),E}function f(){if(typeof ResizeObserver<"u"&&(P=new ResizeObserver(()=>{q()&&v()}),w.value&&P.observe(w.value),M.value&&P.observe(M.value),w.value)){let h=w.value.parentElement;for(;h&&!h.classList.contains("v-expansion-panel-text__wrapper")&&h!==document.body;)h=h.parentElement;h&&h.classList.contains("v-expansion-panel-text__wrapper")&&P.observe(h)}}function L(){if(typeof MutationObserver<"u"&&w.value){let h=w.value.closest(".v-expansion-panel");h&&(O=new MutationObserver(r=>{r.forEach(D=>{D.type==="attributes"&&D.attributeName==="class"&&h.classList.contains("v-expansion-panel--active")&&H()})}),O.observe(h,{attributes:!0,attributeFilter:["class"]}))}}function _(){te=setInterval(()=>{q()},200),setTimeout(()=>{clearInterval(te)},6e4)}function k(){setTimeout(()=>{B.value=!0},100)}Be(()=>{ue(),window.addEventListener("resize",v),f(),L(),k(),ye(()=>{q(),_()}),typeof IntersectionObserver<"u"&&w.value&&(K.value=new IntersectionObserver(h=>{h.forEach(r=>{r.isIntersecting&&H()})},{threshold:.1}),K.value.observe(w.value))}),ot(()=>{window.removeEventListener("resize",v),P&&P.disconnect(),O&&O.disconnect(),K.value&&K.value.disconnect(),te&&clearInterval(te),x&&x.dispose(),c&&c.dispose()}),be(()=>o.chartData,()=>{ue()},{deep:!0}),be(()=>o.loading,h=>{A.value=h});function d(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(z.text="#E6E1E5",z.background="#1C1B1F",z.surface="#2C2C2C",z.outline="#938F99",z.subtle="#49454F",(x||c)&&ue())}d();const J=window.matchMedia("(prefers-color-scheme: dark)");return J.addEventListener&&J.addEventListener("change",d),y({refreshAllCharts:g,downloadChart:se}),(h,r)=>{const D=l("v-icon"),N=l("v-spacer"),W=l("v-btn"),U=l("v-tooltip"),me=l("v-card-title"),le=l("v-card-text"),I=l("v-card"),ee=l("v-expand-transition"),de=l("v-chip"),Fe=l("v-slide-x-transition"),Se=l("v-divider"),s=l("v-hover"),n=l("v-col"),ve=l("v-row"),ie=l("v-card-actions"),xe=l("v-container");return T(),oe(xe,{fluid:"",class:"arima-correlation-analysis"},{default:t(()=>[e(I,{class:Y(["main-card mb-4",{"card-enter":B.value}]),elevation:"2",rounded:"lg"},{default:t(()=>[e(me,{class:"text-h5 pa-4 card-title-wrapper"},{default:t(()=>[a("div",Pa,[e(D,{icon:"mdi-chart-line",class:Y(["title-icon",{"icon-spin":A.value}])},null,8,["class"])]),a("div",{class:Y(["title-text",{"title-pulse":A.value}])},[bt(h.$slots,"default",{},()=>[r[6]||(r[6]=u("ARIMA预测相关性分析"))],!0)],2),e(N),e(U,{location:"bottom"},{activator:t(({props:j})=>[e(W,Ee(j,{icon:"mdi-information-outline",variant:"text",density:"comfortable",class:"info-button",onClick:r[0]||(r[0]=Z=>p.value=!p.value)}),null,16)]),default:t(()=>[r[7]||(r[7]=a("span",null,"查看相关信息",-1))]),_:1})]),_:3}),e(ee,null,{default:t(()=>[p.value?(T(),ce("div",Ra,[e(I,{variant:"outlined",class:"info-card mb-3"},{default:t(()=>[e(le,null,{default:t(()=>r[8]||(r[8]=[a("p",{class:"text-body-1 mb-2"},[a("strong",null,"自相关函数 (ACF)"),u(" 用于测量时间序列在不同时间点之间的相关性。它表示时间序列与其自身的滞后版本之间的相关性，有助于识别时间序列中的季节性和周期性模式。 ")],-1),a("p",{class:"text-body-1"},[a("strong",null,"偏自相关函数 (PACF)"),u(" 测量在考虑中间滞后的情况下，时间序列与其特定滞后版本的直接相关性。它有助于确定ARIMA模型中自回归项(AR)的最佳阶数。 ")],-1)])),_:1})]),_:1})])):_e("",!0)]),_:1}),e(le,{class:"chart-container-wrapper"},{default:t(()=>[e(ve,{class:"chart-row"},{default:t(()=>[e(n,{cols:"12",md:"6",class:Y(["chart-column",{"chart-enter-left":B.value}])},{default:t(()=>[e(I,{variant:"outlined",class:Y(["sub-card mb-md-0 mb-4",{"card-hover":i.value==="acf"}])},{default:t(()=>[e(s,null,{default:t(({isHovering:j})=>[a("div",{onMouseenter:Z=>j="acf",onMouseleave:Z=>j=null},[e(me,{class:"text-subtitle-1 chart-title"},{default:t(()=>[r[10]||(r[10]=a("span",{class:"chart-title-text"},"自相关函数 (ACF)",-1)),e(Fe,null,{default:t(()=>[j?(T(),oe(de,{key:0,size:"small",class:"ms-2 chart-info-chip",color:"primary",variant:"flat"},{default:t(()=>r[9]||(r[9]=[u("滞后相关性")])),_:1})):_e("",!0)]),_:2},1024)]),_:2},1024),e(Se,{class:"chart-divider"}),a("div",{ref_key:"acfChart",ref:w,class:Y(["chart-container",{"chart-active":j==="acf"}]),style:{width:"100%",height:"400px"}},null,2),e(ee,null,{default:t(()=>[j==="acf"?(T(),ce("div",Ba,[e(W,{"prepend-icon":"mdi-download",variant:"text",size:"small",class:"chart-action-btn",onClick:r[1]||(r[1]=Z=>se("acf"))},{default:t(()=>r[11]||(r[11]=[u(" 导出图表 ")])),_:1}),e(W,{"prepend-icon":"mdi-refresh",variant:"text",size:"small",class:"chart-action-btn",onClick:r[2]||(r[2]=Z=>b("acf"))},{default:t(()=>r[12]||(r[12]=[u(" 刷新图表 ")])),_:1})])):_e("",!0)]),_:2},1024)],40,Na)]),_:1})]),_:1},8,["class"])]),_:1},8,["class"]),e(n,{cols:"12",md:"6",class:Y(["chart-column",{"chart-enter-right":B.value}])},{default:t(()=>[e(I,{variant:"outlined",class:Y(["sub-card",{"card-hover":i.value==="pacf"}])},{default:t(()=>[e(s,null,{default:t(({isHovering:j})=>[a("div",{onMouseenter:Z=>j="pacf",onMouseleave:Z=>j=null},[e(me,{class:"text-subtitle-1 chart-title"},{default:t(()=>[r[14]||(r[14]=a("span",{class:"chart-title-text"},"偏自相关函数 (PACF)",-1)),e(Fe,null,{default:t(()=>[j?(T(),oe(de,{key:0,size:"small",class:"ms-2 chart-info-chip",color:"secondary",variant:"flat"},{default:t(()=>r[13]||(r[13]=[u("直接相关性")])),_:1})):_e("",!0)]),_:2},1024)]),_:2},1024),e(Se,{class:"chart-divider"}),a("div",{ref_key:"pacfChart",ref:M,class:Y(["chart-container",{"chart-active":j==="pacf"}]),style:{width:"100%",height:"400px"}},null,2),e(ee,null,{default:t(()=>[j==="pacf"?(T(),ce("div",Oa,[e(W,{"prepend-icon":"mdi-download",variant:"text",size:"small",class:"chart-action-btn",onClick:r[3]||(r[3]=Z=>se("pacf"))},{default:t(()=>r[15]||(r[15]=[u(" 导出图表 ")])),_:1}),e(W,{"prepend-icon":"mdi-refresh",variant:"text",size:"small",class:"chart-action-btn",onClick:r[4]||(r[4]=Z=>b("pacf"))},{default:t(()=>r[16]||(r[16]=[u(" 刷新图表 ")])),_:1})])):_e("",!0)]),_:2},1024)],40,Va)]),_:1})]),_:1},8,["class"])]),_:1},8,["class"])]),_:1})]),_:1}),e(ie,{class:"chart-footnote px-4 pb-4"},{default:t(()=>[e(W,{variant:"text","prepend-icon":"mdi-help-circle-outline",size:"small",color:"primary",class:"interpretation-btn",onClick:r[5]||(r[5]=j=>R.value=!R.value)},{default:t(()=>r[17]||(r[17]=[u(" 图表解读指南 ")])),_:1}),e(N),e(W,{variant:"text","prepend-icon":"mdi-refresh",size:"small",loading:m.value,onClick:g,class:"refresh-all-btn"},{default:t(()=>r[18]||(r[18]=[u(" 刷新所有图表 ")])),_:1},8,["loading"])]),_:1}),e(ee,null,{default:t(()=>[R.value?(T(),ce("div",qa,[e(I,{variant:"outlined",class:"interpretation-card"},{default:t(()=>[e(me,{class:"text-subtitle-1"},{default:t(()=>[e(D,{icon:"mdi-book-open-variant",class:"me-2"}),r[19]||(r[19]=u(" 图表解读指南 "))]),_:1}),e(le,null,{default:t(()=>[e(ve,null,{default:t(()=>[e(n,{cols:"12",md:"6"},{default:t(()=>r[20]||(r[20]=[a("div",{class:"interpretation-section"},[a("h3",{class:"text-subtitle-2 mb-2"},"ACF图表解读:"),a("ul",{class:"interpretation-list"},[a("li",null,"如果ACF快速衰减为零，表示时间序列是平稳的"),a("li",null,"如果ACF缓慢衰减，则表示时间序列可能需要差分"),a("li",null,"如果ACF在特定滞后处显示峰值，则表示存在季节性模式"),a("li",null,"超出蓝色虚线（置信区间）的值表示统计显著性的相关性")])],-1)])),_:1}),e(n,{cols:"12",md:"6"},{default:t(()=>r[21]||(r[21]=[a("div",{class:"interpretation-section"},[a("h3",{class:"text-subtitle-2 mb-2"},"PACF图表解读:"),a("ul",{class:"interpretation-list"},[a("li",null,"PACF中的显著值表示自回归过程的可能阶数（AR模型）"),a("li",null,"如果PACF在前p个滞后处显著，然后截断，则AR(p)模型可能合适"),a("li",null,"PACF可帮助确定ARIMA模型中的p值"),a("li",null,"对比ACF和PACF的模式可帮助选择合适的ARIMA模型")])],-1)])),_:1})]),_:1})]),_:1})]),_:1})])):_e("",!0)]),_:1})]),_:3},8,["class"])]),_:3})}}},lt=Pe(Wa,[["__scopeId","data-v-d39b5c71"]]),Ua={key:0},ja={key:1},Za={__name:"AllPrediction",setup(S){const y=C({store:1,item:1,st:500,ed:700,alpha:.6,p:7,q:0,d:1,l:7,epochs:5e3}),o=C([]),w=C([]),M=C(null),i=C(null),p=C(null),R=C(null),B=C(null),A=C(null),m=C(null),x=C(!1),c=C(!1),P=C(!1),O=C(0),K=G(()=>O.value===4),E=C(!1),te=async()=>{x.value=!1,Ce.getAllData().then(v=>{if(v==null)throw new Error("数据未能正常加载");o.value=v.all_data[0],w.value=v.all_data[1]}).then(()=>{x.value=!0}).catch(v=>{console.error(v.message)})},z=async()=>{c.value=!1,Ce.naivePredict().then(v=>{if(v==null)throw new Error("refreshNaive");M.value=v}).then(()=>{c.value=!0,console.log("数据长度："+M.value.pred_data.length)}).catch(v=>{console.error(v.message)})},ne=async()=>{P.value=!1,Ce.expPredict().then(v=>{if(v==null)throw new Error("refreshExp");i.value=v}).then(()=>{P.value=!0}).catch(v=>{console.error(v.message)})},ae=async()=>{O.value=0,Ce.dickeyFullerTest().then(v=>{if(v==null)throw new Error("dickeyFullerTest");B.value=v}).then(()=>{O.value++}).catch(v=>{console.error(v.message)}),Ce.getAcfPacf().then(v=>{if(v==null)throw new Error("getAcfPacf");A.value=v}).then(()=>{O.value++}).catch(v=>{console.error(v.message)}),Ce.getResAcfPacf().then(v=>{if(v==null)throw new Error("getResAcfPacf");m.value=v}).then(()=>{O.value++}).catch(v=>{console.error(v.message)}),Ce.arimaPredict().then(v=>{if(v==null)throw new Error("arimaPredict");p.value=v}).then(()=>{O.value++}).catch(v=>{console.error(v.message)})},se=async()=>{E.value=!1,Ce.neutralNetworkPredict().then(v=>{if(v==null)throw new Error("neutralNetworkPredict");R.value=v}).then(()=>{E.value=!0}).catch(v=>{console.error(v.message)})},b=async()=>{await Ce.changeModel(y.value),te(),z(),ne(),ae(),se()},g=async({store:v,item:H})=>{y.value.store=v,y.value.item=H,b()},$=async({leftIndex:v,rightIndex:H})=>{y.value.st=v,y.value.ed=H,console.log(`预测数据长度: ${H-v}`),await Ce.changeModel(y.value),z(),ne(),ae(),se()},re=async v=>{y.value.alpha=v,await Ce.changeModel(y.value),ne()},ue=async({p:v,d:H,q})=>{y.value.p=v,y.value.d=H,y.value.q=q,await Ce.changeModel(y.value),ae()};return(()=>{let v=localStorage.getItem("exponentialSmoothingAlpha"),H=localStorage.getItem("arimaParam");v&&(y.value.alpha=+v),H&&Object.assign(y.value,JSON.parse(H))})(),Be(()=>{let v=localStorage.getItem("exponentialSmoothingAlpha");v&&(y.value.alpha=v),b()}),(v,H)=>{const q=l("v-skeleton-loader"),f=l("v-expansion-panel-text"),L=l("v-expansion-panel"),_=l("v-expansion-panels");return T(),ce("div",null,[e(Ft,{"initial-store":1,"initial-item":1,onRefreshData:g}),a("div",null,[x.value?(T(),oe(Pt,{key:0,labels:o.value,values:w.value,onRangeConfirmed:$},null,8,["labels","values"])):(T(),oe(q,{key:1,type:"card"}))]),a("div",null,[e(_,{variant:"popout",class:"tw:!mt-2"},{default:t(()=>[e(L,{title:"Naive Prediction"},{default:t(()=>[e(f,null,{default:t(()=>[c.value?(T(),oe(Ve,{key:0,actualSales:w.value.slice(y.value.st,y.value.ed),predictedSales:M.value.pred_data,dates:o.value.slice(y.value.st,y.value.ed),error:M.value.error},null,8,["actualSales","predictedSales","dates","error"])):(T(),oe(q,{key:1,type:"card"}))]),_:1})]),_:1}),e(L,{title:"Exponential Forecasting Method"},{default:t(()=>[e(f,null,{default:t(()=>[e(Aa,{"onUpdate:alpha":re}),P.value?(T(),oe(Ve,{key:0,actualSales:w.value.slice(y.value.st,y.value.ed),predictedSales:i.value.pred_data,dates:o.value.slice(y.value.st,y.value.ed),error:i.value.error},null,8,["actualSales","predictedSales","dates","error"])):(T(),oe(q,{key:1,type:"card"}))]),_:1})]),_:1}),e(L,{title:"ARIMA Forecasting Method"},{default:t(()=>[e(f,null,{default:t(()=>[e(Da,{onUpdateArimaParams:ue}),K.value?(T(),ce("div",Ua,[e(Ta,{testDataString:B.value.replace(new RegExp("NaN","g"),"null")},null,8,["testDataString"]),e(lt,{chartData:A.value},null,8,["chartData"]),e(lt,{chartData:m.value},{default:t(()=>H[0]||(H[0]=[u(" 残差分析")])),_:1},8,["chartData"]),e(Ve,{actualSales:w.value.slice(y.value.st,y.value.ed),predictedSales:p.value.pred_data,dates:o.value.slice(y.value.st,y.value.ed),error:p.value.error},null,8,["actualSales","predictedSales","dates","error"])])):(T(),ce("div",ja,[e(q,{type:"card"}),e(q,{type:"card"}),e(q,{type:"card"})]))]),_:1})]),_:1}),e(L,{title:"Neural Network Forecasting Method"},{default:t(()=>[e(f,null,{default:t(()=>[E.value?(T(),oe(Ve,{key:0,actualSales:w.value.slice(y.value.st,y.value.ed),predictedSales:R.value.pred_data,dates:o.value.slice(y.value.st,y.value.ed),error:R.value.error},null,8,["actualSales","predictedSales","dates","error"])):(T(),oe(q,{key:1,type:"card"}))]),_:1})]),_:1})]),_:1})])])}}};export{Za as default};
