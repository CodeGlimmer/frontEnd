import{j as ve,a as w,i as Z,O as ue,k as ge,c as x,w as l,r as n,C as Me,o as u,d as t,A as je,e as y,g as d,b as s,T as be,F as A,f as W,E as H,t as g}from"./index-BOH9GfG6.js";import{u as Ze}from"./theme-HQ1WYIhm.js";import{O as pe}from"./OderManagement-Dzc_ZI8N.js";import"./useSocket-CGAbKkod.js";import"./RosLib-C7gnwWt6.js";const xe={key:0,class:"d-flex flex-column align-center justify-center fill-height py-16 empty-cart"},ye={key:1,class:"d-flex flex-column fill-height cart-content"},_e={class:"flex-grow-1 overflow-y-auto cart-items-container"},we={class:"d-flex align-center justify-center fill-height"},Ce={class:"d-flex flex-column align-end"},De={class:"text-primary font-weight-medium cart-item-total"},fe={class:"d-flex align-center mt-2 cart-item-controls"},Be={class:"mx-2 cart-item-quantity"},Pe={class:"px-4 py-3 cart-footer"},Ae={class:"d-flex justify-space-between align-center mb-4"},We={class:"text-h6 text-primary font-weight-bold cart-total-amount"},He={class:"card-image-container"},Se={class:"d-flex align-center justify-center fill-height"},Ne={class:"product-overlay"},he={class:"text-primary text-h5 font-weight-bold mb-4 price-tag"},ze={class:"d-flex align-center quantity-control"},Ge={class:"d-flex align-center"},Re={__name:"ShopView",setup(ke){const S=Ze(),{theme:N}=ve(S),h=w(()=>N.value=="dark"),C=Z([{id:1,name:"商品 A",price:15.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik04MCAxMDBoNDBsLTIwIDM1LTIwLTM1eiIgZmlsbD0iIzNiODJmNiIvPjxwYXRoIGQ9Ik04MCA5MGg0MGwtMjAtMzVMODAgOTB6IiBmaWxsPSIjMzdiMmZmIi8+PHRleHQgeD0iMTAwIiB5PSIxMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmaWxsPSIjMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5BPC90ZXh0Pjwvc3ZnPg=="},{id:2,name:"商品 B",price:29.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxyZWN0IHg9IjYwIiB5PSI2MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjZWM0ODk5Ii8+PHRleHQgeD0iMTAwIiB5PSIxMTAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5CPC90ZXh0Pjwvc3ZnPg=="},{id:3,name:"商品 C",price:49.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNDAiIGZpbGw9IiMxMGIxODEiLz48dGV4dCB4PSIxMDAiIHk9IjExMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkM8L3RleHQ+PC9zdmc+"},{id:4,name:"商品 D",price:99.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik0xMDAgNjBsNDAgNjkuMjgyLTEwNS4yNzYtMzIuMzYxaDEzMC41NTJMMTY2IDEyOS4yODJMMTAwIDYweiIgZmlsbD0iI2YzOWMxMiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RDwvdGV4dD48L3N2Zz4="},{id:5,name:"商品 E",price:39.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik02MCAxNDBoODBMNjAgNjB2ODB6IiBmaWxsPSIjOGIwMGZmIi8+PHBhdGggZD0iTTE0MCA2MEg2MGw4MCA4MFY2MHoiIGZpbGw9IiNhODU1ZmYiLz48dGV4dCB4PSIxMDAiIHk9IjEwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkU8L3RleHQ+PC9zdmc+"},{id:6,name:"商品 F",price:24.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxlbGxpcHNlIGN4PSIxMDAiIGN5PSIxMDAiIHJ4PSI0MCIgcnk9IjMwIiBmaWxsPSIjZmM2ZDI2Ii8+PHRleHQgeD0iMTAwIiB5PSIxMTAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5GPC90ZXh0Pjwvc3ZnPg=="},{id:7,name:"商品 G",price:19.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxyZWN0IHg9IjYwIiB5PSI2MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMDQ3ODU3Ii8+PHJlY3QgeD0iNjAiIHk9IjEwMCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMDY5NjY5Ii8+PHRleHQgeD0iMTAwIiB5PSIxMTAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5HPC90ZXh0Pjwvc3ZnPg=="},{id:8,name:"商品 H",price:59.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik02MCA2MGg4MHY4MGgtODBWNjB6IiBzdHJva2U9IiMyNTYzZWIiIHN0cm9rZS13aWR0aD0iOCIgZmlsbD0ibm9uZSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzI1NjNlYiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SDwvdGV4dD48L3N2Zz4="},{id:9,name:"商品 I",price:12.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxsaW5lIHgxPSI2MCIgeTE9IjEwMCIgeDI9IjE0MCIgeTI9IjEwMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjQiLz48bGluZSB4MT0iMTAwIiB5MT0iNjAiIHgyPSIxMDAiIHkyPSIxNDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHRleHQgeD0iMTAwIiB5PSIxMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmaWxsPSIjMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JPC90ZXh0Pjwvc3ZnPg=="},{id:10,name:"商品 J",price:79.99,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y1ZjVmNSIvPjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSIjZGM0ODVjIi8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSIjODhlMGQ5Ii8+PGNpcmNsZSBjeD0iODAiIGN5PSIxMjAiIHI9IjIwIiBmaWxsPSIjZmZkZGIxIi8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMTIwIiByPSIyMCIgZmlsbD0iI2M3Y2VlYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTYwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SjwvdGV4dD48L3N2Zz4="}]),o=ue({});ge(()=>{C.value.forEach(i=>{o[i.id]=1})});const m=Z([]),M=Z(!1),j=Z(!1),p=Z(""),D=w(()=>m.value.reduce((i,e)=>i+e.quantity,0)),z=w(()=>m.value.reduce((i,e)=>i+e.price*e.quantity,0)),G=i=>{o[i.id]<100&&o[i.id]++},k=i=>{o[i.id]>1&&o[i.id]--},Y=i=>{let e=o[i];isNaN(e)||e<1?o[i]=1:e>100?o[i]=100:o[i]=Math.floor(e)},Q=i=>{i.quantity<100&&i.quantity++},T=i=>{i.quantity>1&&i.quantity--},V=i=>{const e=o[i.id],I=m.value.find(r=>r.id===i.id);if(I){const r=I.quantity+e;I.quantity=Math.min(r,100)}else m.value.push({id:i.id,name:i.name,price:i.price,image:i.image,quantity:e});o[i.id]=1,p.value=`已将 ${i.name} ${e} 件加入购物车`,j.value=!0,M.value=!0},X=i=>{const e=m.value.findIndex(I=>I.id===i);if(e!==-1){const I=m.value[e];m.value.splice(e,1),p.value=`已从购物车移除 ${I.name}`,j.value=!0}},R=()=>{m.value.forEach(i=>{const e=new Date,I=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),b=String(e.getDate()).padStart(2,"0");pe.add_order({order_id:1,product_type:i.name.slice(-1),order_quantity:i.quantity,order_date:`${I}-${r}-${b}`,priority:Math.floor(Math.random()*10)+1})}),p.value="订单已提交，感谢您的购买！",j.value=!0,m.value=[],M.value=!1};return(i,e)=>{const I=n("v-toolbar-title"),r=n("v-spacer"),b=n("v-icon"),c=n("v-btn"),L=n("v-toolbar"),f=n("v-divider"),B=n("v-progress-circular"),P=n("v-img"),J=n("v-avatar"),E=n("v-list-item-title"),q=n("v-list-item-subtitle"),O=n("v-list-item"),F=n("v-list"),$=n("v-navigation-drawer"),U=n("v-app-bar-title"),K=n("v-badge"),ee=n("v-app-bar"),te=n("v-card-title"),ie=n("v-text-field"),ae=n("v-card-text"),le=n("v-card-actions"),ne=n("v-card"),se=n("v-col"),oe=n("v-row"),ce=n("v-container"),me=n("v-main"),Ie=n("v-snackbar"),de=n("v-app"),re=Me("ripple");return u(),x(de,{theme:h.value?"dark":"light"},{default:l(()=>[t($,{modelValue:M.value,"onUpdate:modelValue":e[2]||(e[2]=a=>M.value=a),location:"bottom",temporary:"",width:"400",class:"cart-drawer position-fixed tw:!mx-2",style:{"z-index":"1000"}},{default:l(()=>[t(L,{color:"surface",flat:"",class:"cart-header"},{default:l(()=>[t(I,{class:"font-weight-medium"},{default:l(()=>e[6]||(e[6]=[d("购物车")])),_:1}),t(r),t(c,{icon:"",onClick:e[0]||(e[0]=a=>M.value=!1),class:"close-cart-btn"},{default:l(()=>[t(b,null,{default:l(()=>e[7]||(e[7]=[d("mdi-close")])),_:1})]),_:1})]),_:1}),t(f),m.value.length===0?(u(),y("div",xe,[t(b,{icon:"mdi-cart-outline",size:"64",color:"grey-lighten-1",class:"mb-4 empty-cart-icon"}),e[9]||(e[9]=s("span",{class:"text-body-1 text-grey-darken-1 empty-cart-text"},"购物车暂无商品",-1)),t(c,{color:"primary",variant:"text",class:"mt-4 continue-shopping-btn",onClick:e[1]||(e[1]=a=>M.value=!1)},{default:l(()=>e[8]||(e[8]=[d(" 继续购物 ")])),_:1})])):(u(),y("div",ye,[s("div",_e,[t(F,{lines:"two"},{default:l(()=>[t(be,{name:"cart-item"},{default:l(()=>[(u(!0),y(A,null,W(m.value,(a,_)=>(u(),x(O,{key:a.id,class:"cart-item",style:H(`animation-delay: ${.05*_}s`)},{prepend:l(()=>[t(J,{rounded:"lg",size:"64",class:"mr-3 cart-item-image"},{default:l(()=>[t(P,{src:a.image,cover:""},{placeholder:l(()=>[s("div",we,[t(B,{indeterminate:"",color:"grey-lighten-3",size:"30"})])]),_:2},1032,["src"])]),_:2},1024)]),append:l(()=>[s("div",Ce,[s("div",De," ¥"+g((a.price*a.quantity).toFixed(2)),1),s("div",fe,[t(c,{icon:"mdi-minus",variant:"text",density:"comfortable",size:"small",onClick:v=>T(a),disabled:a.quantity<=1,class:"cart-quantity-btn"},null,8,["onClick","disabled"]),s("span",Be,g(a.quantity),1),t(c,{icon:"mdi-plus",variant:"text",density:"comfortable",size:"small",onClick:v=>Q(a),disabled:a.quantity>=100,class:"cart-quantity-btn"},null,8,["onClick","disabled"]),t(c,{icon:"mdi-delete-outline",variant:"text",density:"comfortable",color:"error",size:"small",class:"ml-2 remove-item-btn",onClick:v=>X(a.id)},null,8,["onClick"])])])]),default:l(()=>[t(E,{class:"font-weight-medium mb-1 cart-item-title"},{default:l(()=>[d(g(a.name),1)]),_:2},1024),t(q,{class:"cart-item-price"},{default:l(()=>[d("单价: ¥"+g(a.price.toFixed(2)),1)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})]),_:1})]),t(f),s("div",Pe,[s("div",Ae,[e[10]||(e[10]=s("span",{class:"text-h6 font-weight-medium cart-total-label"},"合计",-1)),s("span",We,"¥"+g(z.value.toFixed(2)),1)]),t(c,{block:"",color:"primary",size:"large",variant:"elevated",onClick:R,height:"48",class:"checkout-btn"},{default:l(()=>e[11]||(e[11]=[d(" 确认付款 ")])),_:1})])]))]),_:1},8,["modelValue"]),je((u(),x(ee,{app:"",elevation:"4",color:"surface",class:"tw:!rounded-xl tw:!sticky"},{default:l(()=>[t(U,{class:"text-primary font-weight-medium"},{default:l(()=>e[12]||(e[12]=[s("span",{class:"app-title"},"购物平台",-1)])),_:1}),t(r),t(c,{icon:"",onClick:e[3]||(e[3]=a=>M.value=!0),class:"mr-2 cart-btn",variant:"text"},{default:l(()=>[t(K,{content:D.value.toString(),"model-value":D.value>0,color:"primary","offset-x":"12","offset-y":"12"},{default:l(()=>[t(b,null,{default:l(()=>e[13]||(e[13]=[d("mdi-cart-outline")])),_:1})]),_:1},8,["content","model-value"])]),_:1})]),_:1})),[[re]]),t(me,null,{default:l(()=>[t(ce,{class:"main-container"},{default:l(()=>[e[15]||(e[15]=s("h2",{class:"text-h4 font-weight-bold mb-6 page-title"},"精选商品",-1)),t(oe,null,{default:l(()=>[(u(!0),y(A,null,W(C.value,(a,_)=>(u(),x(se,{key:a.id,cols:"12",sm:"6",md:"4",lg:"3",class:"product-col"},{default:l(()=>[t(ne,{class:"mx-auto product-card tw:hover:!shadow-m-elevation-8 tw:!translate-2 tw:!transition-transform tw:!ease-in tw:!duration-300 rounded-lg",elevation:"2",height:"100%"},{default:l(()=>[s("div",He,[t(P,{src:a.image,alt:a.name,height:"200",cover:"",class:"bg-grey-lighten-2 product-image"},{placeholder:l(()=>[s("div",Se,[t(B,{indeterminate:"",color:"primary"})])]),_:2},1032,["src","alt"]),s("div",Ne,[t(c,{icon:"mdi-heart-outline",variant:"text",size:"small",class:"favorite-btn"}),t(c,{icon:"mdi-eye-outline",variant:"text",size:"small",class:"view-btn"})])]),t(te,{class:"product-title"},{default:l(()=>[d(g(a.name),1)]),_:2},1024),t(ae,null,{default:l(()=>[s("div",he," ¥"+g(a.price.toFixed(2)),1),s("div",ze,[t(c,{density:"comfortable",icon:"mdi-minus",variant:"text",onClick:v=>k(a),disabled:o[a.id]<=1,size:"small",class:"quantity-btn"},null,8,["onClick","disabled"]),t(ie,{modelValue:o[a.id],"onUpdate:modelValue":v=>o[a.id]=v,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",class:"quantity-input mx-2",min:"1",max:"100",onChange:v=>Y(a.id),variant:"solo",flat:"",style:{width:"60px"}},null,8,["modelValue","onUpdate:modelValue","onChange"]),t(c,{density:"comfortable",icon:"mdi-plus",variant:"text",onClick:v=>G(a),disabled:o[a.id]>=100,size:"small",class:"quantity-btn"},null,8,["onClick","disabled"])])]),_:2},1024),t(le,null,{default:l(()=>[t(c,{block:"",color:"primary",variant:"elevated",onClick:v=>V(a),"prepend-icon":"mdi-cart-plus",class:"mb-2 add-to-cart-btn",style:H(`animation-delay: ${.05*_}s`)},{default:l(()=>e[14]||(e[14]=[s("span",{class:"btn-text"},"加入购物车",-1)])),_:2},1032,["onClick","style"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(Ie,{modelValue:j.value,"onUpdate:modelValue":e[5]||(e[5]=a=>j.value=a),timeout:3e3,location:"bottom right",rounded:"pill",color:"success",elevation:"4",class:"success-snackbar"},{actions:l(()=>[t(c,{icon:"mdi-close",variant:"text",onClick:e[4]||(e[4]=a=>j.value=!1),class:"close-snackbar-btn"})]),default:l(()=>[s("div",Ge,[t(b,{icon:"mdi-check-circle",class:"mr-2 success-icon"}),d(" "+g(p.value),1)])]),_:1},8,["modelValue"])]),_:1},8,["theme"])}}};export{Re as default};
