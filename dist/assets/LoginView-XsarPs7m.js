import{u as E}from"./theme-ofzu94UO.js";import{_ as M,c as P,w as a,s as U,a as q,r as t,o as f,b as i,d as s,n as d,e as z,F as R,f as B,g as m,t as v,h as j}from"./index-kmKPHIKf.js";import"./useSocket-DSyTKqUj.js";import{u as F}from"./UserManagement-Bsc9NY--.js";import"./RosLib-C7gnwWt6.js";const N={name:"LoginComponent",setup(){const o=E(),{theme:e}=U(o),{changeTheme:c}=o;return{isDarkTheme:q(()=>e.value==="dark"),toggleTheme:()=>{c(),document.body.classList.toggle("dark-mode")}}},data(){return{username:"",password:"",showPassword:!1,rememberMe:!1,loading:!1,errors:{username:"",password:""},rules:{required:o=>!!o||"This field is required",password:o=>o.length>=6||"Password must be at least 6 characters"},snackbar:{show:!1,text:"",color:"success"}}},mounted(){this.isDarkTheme&&document.body.classList.add("dark-mode"),this.initWaveAnimation(),document.addEventListener("keydown",this.handleKeyDown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{async handleLogin(){if(this.$refs.form.validate()){this.loading=!0;try{const o={username:this.username,password:this.password};await F.login(o)?(this.showSnackbar("Login successful! Redirecting...","success"),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",this.username),this.rememberMe&&localStorage.setItem("remember_me","true"),setTimeout(()=>{this.$router.push("/index")},1e3)):(this.errors.username="Invalid username or password",this.errors.password="Invalid username or password",this.showSnackbar("Login failed, please check your credentials","error"))}catch(o){console.error("Login error:",o),o.response?this.showSnackbar(o.response.data.message||"Server error, please try again","error"):o.request?this.showSnackbar("Network error, please check your connection","error"):this.showSnackbar("Login failed, please try again","error")}finally{this.loading=!1}}},clearError(o){this[o]=""},goToRegister(){this.$router.push("/signup"),this.showSnackbar("Redirecting to sign up page...","info")},showSnackbar(o,e){this.snackbar.text=o,this.snackbar.color=e,this.snackbar.show=!0},handleKeyDown(o){o.key==="Enter"&&!this.loading&&this.handleLogin()},initWaveAnimation(){document.querySelectorAll(".wave").forEach(e=>{const c=10+Math.random()*10;e.style.animationDuration=`${c}s`})}}},A={class:"floating-circles"},K={class:"theme-toggle-wrapper"},W={class:"d-flex justify-space-between align-center mb-5"};function G(o,e,c,n,r,u){const h=t("v-icon"),k=t("v-tooltip"),g=t("v-btn"),w=t("v-avatar"),b=t("v-row"),_=t("v-card-item"),p=t("v-text-field"),y=t("v-checkbox"),x=t("v-progress-circular"),T=t("v-form"),D=t("v-card-text"),S=t("v-divider"),L=t("v-card-actions"),V=t("v-snackbar"),C=t("v-card"),I=t("v-container");return f(),P(I,{fluid:"",class:"login-container d-flex align-center justify-center"},{default:a(()=>[i("div",{class:d(["animated-background",{"dark-theme":n.isDarkTheme}])},[e[8]||(e[8]=i("div",{class:"wave wave1"},null,-1)),e[9]||(e[9]=i("div",{class:"wave wave2"},null,-1)),e[10]||(e[10]=i("div",{class:"wave wave3"},null,-1)),i("div",A,[(f(),z(R,null,B(20,l=>i("div",{class:"circle",key:l})),64))])],2),e[17]||(e[17]=i("div",{class:"blur-overlay"},null,-1)),s(C,{class:d(["login-card mx-auto",{"dark-card":n.isDarkTheme}]),elevation:"3","max-width":"450",rounded:"lg",loading:r.loading,disabled:r.loading},{default:a(()=>[e[16]||(e[16]=i("div",{class:"card-shine-effect"},null,-1)),i("div",K,[s(g,{icon:n.isDarkTheme?"mdi-weather-night":"mdi-weather-sunny",density:"comfortable",variant:"text",size:"small",onClick:n.toggleTheme,class:"theme-toggle-btn",color:n.isDarkTheme?"amber":"indigo-darken-3"},{default:a(()=>[s(h,{color:n.isDarkTheme?"amber":"indigo-darken-3"},{default:a(()=>[m(v(n.isDarkTheme?"mdi-weather-night":"mdi-weather-sunny"),1)]),_:1},8,["color"]),s(k,{activator:"parent",location:"bottom"},{default:a(()=>[m(" Toggle "+v(n.isDarkTheme?"Light":"Dark")+" Mode ",1)]),_:1})]),_:1},8,["icon","onClick","color"])]),s(_,null,{default:a(()=>[s(b,{justify:"center",class:"mt-4 mb-2"},{default:a(()=>[s(w,{size:"80",class:d(["elevation-4 animate-bounce",n.isDarkTheme?"dark-gradient":"primary-gradient"])},{default:a(()=>[s(h,{size:"x-large",color:"white"},{default:a(()=>e[11]||(e[11]=[m("mdi-account")])),_:1})]),_:1},8,["class"])]),_:1}),i("h1",{class:d(["text-h4 text-center mt-4 font-weight-bold animate-title",n.isDarkTheme?"text-amber":"text-primary"])}," Welcome Back ",2),e[12]||(e[12]=i("p",{class:"text-subtitle-1 text-center text-medium-emphasis"},"Sign in to your account",-1))]),_:1}),s(D,null,{default:a(()=>[s(T,{onSubmit:j(u.handleLogin,["prevent"]),ref:"form"},{default:a(()=>[s(p,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",color:n.isDarkTheme?"amber":"primary",class:d(["mb-3 animate-slide-fade custom-field",{"dark-field":n.isDarkTheme}]),rules:[r.rules.required],"error-messages":r.errors.username,onFocus:e[1]||(e[1]=l=>u.clearError("username"))},null,8,["modelValue","color","rules","error-messages","class"]),s(p,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=l=>r.password=l),label:"Password","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":r.showPassword?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[3]||(e[3]=l=>r.showPassword=!r.showPassword),type:r.showPassword?"text":"password",variant:"outlined",color:n.isDarkTheme?"amber":"primary",class:d(["mb-2 animate-slide-fade custom-field",{"dark-field":n.isDarkTheme}]),rules:[r.rules.required,r.rules.password],"error-messages":r.errors.password,onFocus:e[4]||(e[4]=l=>u.clearError("password"))},null,8,["modelValue","append-inner-icon","type","color","rules","error-messages","class"]),i("div",W,[s(y,{modelValue:r.rememberMe,"onUpdate:modelValue":e[5]||(e[5]=l=>r.rememberMe=l),label:"Remember me on this device",color:n.isDarkTheme?"amber":"primary","hide-details":"",density:"compact",class:"animate-fade"},null,8,["modelValue","color"])]),s(g,{color:n.isDarkTheme?"amber":"primary",block:"",size:"large",type:"submit",class:d(["mt-2 login-btn",n.isDarkTheme?"dark-gradient":"primary-gradient"]),elevation:"2",loading:r.loading,rounded:"lg"},{loader:a(()=>[s(x,{indeterminate:"",color:"white"})]),default:a(()=>[e[13]||(e[13]=i("span",{class:"btn-content"},"Sign In",-1))]),_:1},8,["color","class","loading"])]),_:1},8,["onSubmit"])]),_:1}),s(S,{class:"mt-3"}),s(L,{class:"d-flex justify-center pa-4"},{default:a(()=>[e[15]||(e[15]=i("p",{class:"text-body-2 text-medium-emphasis me-2"},"Don't have an account?",-1)),s(g,{variant:"text",color:n.isDarkTheme?"amber":"primary",class:"register-btn",onClick:u.goToRegister},{default:a(()=>e[14]||(e[14]=[m(" Sign Up ")])),_:1},8,["color","onClick"])]),_:1}),s(V,{modelValue:r.snackbar.show,"onUpdate:modelValue":e[7]||(e[7]=l=>r.snackbar.show=l),color:r.snackbar.color,timeout:"3000",location:"top",rounded:"pill",elevation:"4"},{actions:a(()=>[s(g,{color:"white",icon:"mdi-close",onClick:e[6]||(e[6]=l=>r.snackbar.show=!1),variant:"text",size:"small"})]),default:a(()=>[m(v(r.snackbar.text)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["loading","disabled","class"])]),_:1})}const Y=M(N,[["render",G],["__scopeId","data-v-ea155551"]]);export{Y as default};
